<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 3 â€” ã“ã“ / ãã“ / ã‚ãã“ | Minna no Nihongo N5</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ========== CSS Variables â€” Purple/Violet (Places, Directions) ========== */
        :root {
            --primary: #7c3aed;
            --primary-light: #8b5cf6;
            --primary-dark: #6d28d9;
            --accent: #ec4899;
            --accent-light: #fce7f3;
            --accent-dark: #db2777;
            --success: #38a169;
            --success-light: #c6f6d5;
            --error: #e53e3e;
            --error-light: #fed7d7;
            --warning: #f59e0b;
            --warning-light: #fde68a;
            --bg-light: #faf5ff;
            --bg-card: #ffffff;
            --text-primary: #4c1d95;
            --text-secondary: #5b4a8a;
            --text-muted: #718096;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            --radius: 12px;
            --radius-lg: 20px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ========== Reset & Base ========== */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Noto Sans JP', 'Outfit', sans-serif;
            background: linear-gradient(135deg, var(--bg-light) 0%, #ede9fe 100%);
            color: var(--text-primary);
            line-height: 1.7;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ========== Progress Bar ========== */
        .progress-container {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            background: var(--bg-card); box-shadow: var(--shadow); padding: 12px 20px;
        }
        .progress-header {
            display: flex; justify-content: space-between; align-items: center;
            max-width: 1200px; margin: 0 auto; gap: 20px;
        }
        .progress-title {
            font-size: 0.9rem; font-weight: 600; color: var(--primary);
            display: flex; align-items: center; gap: 8px;
        }
        .progress-title .lesson-badge {
            background: var(--primary); color: white; padding: 2px 10px;
            border-radius: 20px; font-size: 0.75rem;
        }
        .progress-bar-wrapper { flex: 1; max-width: 500px; }
        .progress-bar {
            height: 8px; background: var(--border); border-radius: 10px; overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: 10px; transition: width 0.5s ease; width: 0%;
        }
        .progress-text { font-size: 0.8rem; color: var(--text-muted); text-align: right; margin-top: 4px; }
        .progress-nav { display: flex; gap: 8px; }
        .nav-btn {
            background: var(--primary); color: white; border: none; padding: 8px 16px;
            border-radius: 8px; cursor: pointer; font-size: 0.85rem; font-weight: 500;
            transition: var(--transition); display: flex; align-items: center; gap: 6px;
        }
        .nav-btn:hover { background: var(--primary-light); transform: translateY(-1px); }
        .nav-btn:disabled { background: var(--border); color: var(--text-muted); cursor: not-allowed; transform: none; }

        /* ========== Main Container ========== */
        .presentation { padding-top: 80px; min-height: 100vh; }

        /* ========== Slides ========== */
        .slide { display: none; max-width: 1000px; margin: 0 auto; padding: 40px 20px; animation: fadeIn 0.5s ease; }
        .slide.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* ========== Title Slide ========== */
        .title-slide { text-align: center; padding: 60px 20px; }
        .title-slide .book-badge {
            display: inline-block; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white; padding: 8px 24px; border-radius: 30px; font-size: 0.9rem; font-weight: 500; margin-bottom: 24px; letter-spacing: 1px;
        }
        .title-slide h1 { font-size: clamp(2.5rem, 6vw, 4rem); font-weight: 700; color: var(--primary); margin-bottom: 16px; line-height: 1.2; }
        .title-slide .lesson-title-jp { font-size: clamp(1.5rem, 4vw, 2.5rem); color: var(--accent); margin-bottom: 8px; }
        .title-slide .lesson-subtitle { font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 40px; }
        .title-card {
            background: var(--bg-card); border-radius: var(--radius-lg); padding: 40px;
            box-shadow: var(--shadow-lg); max-width: 700px; margin: 0 auto 40px;
        }
        .title-card h2 { color: var(--primary); font-size: 1.3rem; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .grammar-list { display: grid; gap: 12px; }
        .grammar-item {
            display: flex; align-items: center; gap: 12px; padding: 12px 16px;
            background: var(--bg-light); border-radius: var(--radius);
            border-left: 4px solid var(--accent); transition: var(--transition);
        }
        .grammar-item:hover { transform: translateX(8px); background: var(--accent-light); }
        .grammar-number {
            width: 28px; height: 28px; background: var(--primary); color: white;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 0.85rem; font-weight: 600; flex-shrink: 0;
        }
        .start-btn {
            background: linear-gradient(135deg, var(--accent) 0%, var(--primary) 100%);
            color: white; border: none; padding: 16px 48px; border-radius: 30px;
            font-size: 1.1rem; font-weight: 600; cursor: pointer;
            transition: var(--transition); box-shadow: 0 4px 14px rgba(0,0,0,0.2);
        }
        .start-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0,0,0,0.3); }

        /* ========== Content Slides ========== */
        .content-card { background: var(--bg-card); border-radius: var(--radius-lg); padding: 40px; box-shadow: var(--shadow-lg); margin-bottom: 24px; }
        .slide-header {
            display: flex; align-items: center; gap: 16px; margin-bottom: 32px;
            padding-bottom: 20px; border-bottom: 2px solid var(--border);
        }
        .grammar-badge { background: var(--primary); color: white; padding: 8px 16px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; white-space: nowrap; }
        .slide-header h2 { font-size: 1.8rem; color: var(--primary); flex: 1; }
        .slide-header .jp-title { font-size: 1.3rem; color: var(--accent); font-weight: 500; }

        /* ========== Ruby ========== */
        ruby { ruby-position: over; }
        ruby rt { font-size: 0.6em; color: var(--text-muted); }

        /* ========== Example Boxes ========== */
        .example-box {
            background: linear-gradient(135deg, #faf5ff 0%, #ede9fe 100%);
            border-radius: var(--radius); padding: 24px; margin: 20px 0;
            border-left: 4px solid var(--primary);
        }
        .example-label { font-size: 0.8rem; font-weight: 600; color: var(--primary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .example-japanese { font-size: 1.4rem; color: var(--text-primary); margin-bottom: 8px; line-height: 2; }
        .example-english { font-size: 1rem; color: var(--text-secondary); font-style: italic; }

        .example-comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .polite-box, .plain-box { padding: 20px; border-radius: var(--radius); }
        .polite-box { background: linear-gradient(135deg, #e6fffa 0%, #b2f5ea 100%); border-left: 4px solid #38b2ac; }
        .plain-box { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #d69e2e; }
        .style-label { font-size: 0.85rem; font-weight: 600; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
        .polite-box .style-label { color: #234e52; }
        .plain-box .style-label { color: #744210; }

        /* ========== Structure Box ========== */
        .structure-box {
            background: linear-gradient(135deg, #ecfeff 0%, #cffafe 100%);
            border-radius: var(--radius); padding: 20px; margin: 20px 0;
            border-left: 4px solid var(--accent);
        }
        .structure-box .label { font-size: 0.8rem; font-weight: 600; color: var(--accent-dark); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; }
        .structure-formula {
            font-size: 1.15rem; font-family: 'Outfit', monospace; color: var(--primary-dark);
            background: white; padding: 12px 20px; border-radius: 8px; display: inline-block; margin: 8px 0;
        }
        .structure-formula .highlight { color: var(--primary); font-weight: 600; }
        .structure-formula .accent { color: var(--accent); font-weight: 600; }

        /* ========== Explanation ========== */
        .explanation { margin: 24px 0; }
        .explanation h3 { font-size: 1.1rem; color: var(--primary); margin-bottom: 12px; display: flex; align-items: center; gap: 10px; }
        .explanation p { color: var(--text-secondary); margin-bottom: 12px; }
        .key-point { background: var(--accent-light); padding: 16px 20px; border-radius: var(--radius); margin: 16px 0; border-left: 4px solid var(--accent); }
        .key-point strong { color: var(--primary-dark); }

        /* ========== Visual Diagram ========== */
        .visual-diagram {
            background: linear-gradient(135deg, #faf5ff 0%, #ede9fe 100%);
            border-radius: var(--radius); padding: 28px; margin: 24px 0; border: 2px solid #ddd6fe; text-align: center;
        }
        .visual-diagram .label { font-size: 0.8rem; font-weight: 600; color: var(--primary-dark); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 16px; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .distance-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin: 16px 0; }
        .distance-item { background: white; padding: 20px 12px; border-radius: var(--radius); box-shadow: var(--shadow); transition: var(--transition); }
        .distance-item:hover { transform: translateY(-3px); box-shadow: var(--shadow-lg); }
        .distance-emoji { font-size: 2rem; margin-bottom: 8px; display: block; }
        .distance-jp { font-size: 1.4rem; font-weight: 700; color: var(--primary); display: block; margin-bottom: 4px; }
        .distance-en { font-size: 0.85rem; color: var(--text-secondary); display: block; margin-bottom: 4px; }
        .distance-desc { font-size: 0.78rem; color: var(--text-muted); display: block; }
        .distance-alt { font-size: 0.95rem; color: var(--accent); font-weight: 500; display: block; margin-top: 6px; }

        /* ========== Conversation Box ========== */
        .conversation-box {
            background: linear-gradient(135deg, #fefce8 0%, #fef08a 100%);
            border-radius: var(--radius); padding: 24px; margin: 20px 0; border-left: 4px solid var(--warning);
        }
        .conversation-box .example-label { color: #92400e; }
        .conversation-line { margin-bottom: 12px; font-size: 1.2rem; line-height: 2; }
        .conversation-line:last-child { margin-bottom: 0; }
        .speaker { font-weight: 600; color: var(--primary-dark); min-width: 24px; display: inline-block; }
        .speaker.b { color: var(--accent); }
        .conversation-translation { font-size: 0.9rem; color: var(--text-muted); margin-top: 4px; font-style: italic; }

        /* ========== Three-column KO-SO-A boxes ========== */
        .triple-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin: 20px 0; }
        .ko-box { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border-left: 4px solid #3b82f6; padding: 20px; border-radius: var(--radius); }
        .ko-box .box-label { color: #1e40af; }
        .so-box { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); border-left: 4px solid #10b981; padding: 20px; border-radius: var(--radius); }
        .so-box .box-label { color: #065f46; }
        .a-box { background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); border-left: 4px solid #ec4899; padding: 20px; border-radius: var(--radius); }
        .a-box .box-label { color: #9d174d; }
        .box-label { font-size: 0.85rem; font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        /* ========== Comparison Grid ========== */
        .comparison-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 20px 0; }
        .comparison-box { padding: 20px; border-radius: var(--radius); }

        /* ========== Collapsible Reference Notes ========== */
        .ref-connection { margin: 24px 0; }
        .ref-toggle {
            width: 100%; background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
            border: none; padding: 16px 20px; border-radius: var(--radius); cursor: pointer;
            display: flex; align-items: center; justify-content: space-between;
            font-size: 1rem; font-weight: 500; color: #c53030; transition: var(--transition);
        }
        .ref-toggle:hover { background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%); }
        .ref-toggle .icon { transition: transform 0.3s ease; }
        .ref-toggle.open .icon { transform: rotate(180deg); }
        .ref-content {
            max-height: 0; overflow: hidden; transition: max-height 0.4s ease, padding 0.4s ease;
            background: #fffafa; border-radius: 0 0 var(--radius) var(--radius);
        }
        .ref-content.open { max-height: 800px; padding: 20px; border: 1px solid #fed7d7; border-top: none; }
        .ref-content h4 { color: #c53030; font-size: 0.95rem; margin-bottom: 12px; }
        .ref-content p { color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 10px; }
        .ref-badge { display: inline-block; background: #c53030; color: white; padding: 2px 10px; border-radius: 20px; font-size: 0.8rem; margin-right: 8px; }

        /* ========== Data Tables ========== */
        .table-container { overflow-x: auto; margin: 24px 0; }
        .data-table { width: 100%; border-collapse: collapse; font-size: 0.95rem; }
        .data-table th { background: var(--primary); color: white; padding: 14px 16px; text-align: left; font-weight: 500; }
        .data-table td { padding: 12px 16px; border-bottom: 1px solid var(--border); }
        .data-table tr:nth-child(even) { background: var(--bg-light); }
        .data-table tr:hover { background: #ede9fe; }
        .arrow { color: var(--accent); font-weight: bold; margin: 0 8px; }
        /* Color-coded table header columns */
        .th-ko { background: #3b82f6 !important; }
        .th-so { background: #10b981 !important; }
        .th-a { background: #ec4899 !important; }
        .th-do { background: #f59e0b !important; }

        /* ========== Quiz Slides ========== */
        .quiz-card {
            background: linear-gradient(135deg, #f5f3ff 0%, #ddd6fe 100%);
            border-radius: var(--radius-lg); padding: 40px; box-shadow: var(--shadow-lg); margin-bottom: 24px;
        }
        .quiz-header { display: flex; align-items: center; gap: 16px; margin-bottom: 32px; }
        .quiz-badge { background: var(--accent); color: white; padding: 8px 16px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; }
        .quiz-header h2 { font-size: 1.5rem; color: var(--primary); }
        .quiz-question { background: white; padding: 24px; border-radius: var(--radius); margin-bottom: 20px; box-shadow: var(--shadow); }
        .question-number { font-size: 0.85rem; font-weight: 600; color: var(--accent); margin-bottom: 12px; }
        .question-context { font-size: 0.95rem; color: var(--text-secondary); font-style: italic; margin-bottom: 16px; padding: 12px; background: var(--bg-light); border-radius: 8px; }
        .question-text { font-size: 1.2rem; color: var(--text-primary); margin-bottom: 16px; }
        .fill-blank { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; font-size: 1.3rem; margin: 20px 0; }
        .blank-input {
            border: 2px dashed var(--primary); background: #faf5ff; padding: 8px 16px; border-radius: 8px; min-width: 120px;
            font-size: 1.1rem; font-family: inherit; text-align: center; transition: var(--transition);
        }
        .blank-input:focus { outline: none; border-color: var(--accent); background: white; box-shadow: 0 0 0 3px rgba(236,72,153,0.2); }
        .check-btn {
            background: var(--success); color: white; border: none; padding: 12px 32px;
            border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer;
            transition: var(--transition); margin-top: 20px;
        }
        .check-btn:hover { background: #2f855a; transform: translateY(-2px); }

        /* ========== Instant Feedback ========== */
        .feedback-area { margin-top: 16px; padding: 16px 20px; border-radius: var(--radius); display: none; font-size: 1rem; line-height: 1.6; }
        .feedback-area.show { display: block; animation: fadeIn 0.3s ease; }
        .feedback-area.correct-feedback { background: var(--success-light); border-left: 4px solid var(--success); color: #22543d; }
        .feedback-area.incorrect-feedback { background: var(--error-light); border-left: 4px solid var(--error); color: #742a2a; }
        .feedback-area .fb-icon { font-size: 1.3rem; margin-right: 8px; }
        .feedback-area .fb-answer { font-weight: 700; }
        .feedback-area .fb-explain { margin-top: 8px; font-size: 0.95rem; opacity: 0.9; }

        /* ========== Multiple Choice ========== */
        .mc-options { display: grid; gap: 12px; margin: 16px 0; }
        .mc-option {
            display: flex; align-items: center; gap: 12px; padding: 14px 20px; border-radius: var(--radius);
            border: 2px solid var(--border); background: white; cursor: pointer; transition: var(--transition); font-size: 1.1rem;
        }
        .mc-option:hover { border-color: var(--primary); background: #faf5ff; transform: translateX(4px); }
        .mc-option.correct-choice { border-color: var(--success); background: var(--success-light); }
        .mc-option.incorrect-choice { border-color: var(--error); background: var(--error-light); }
        .mc-option.disabled { pointer-events: none; opacity: 0.7; }
        .mc-option .option-letter {
            width: 32px; height: 32px; border-radius: 50%; background: var(--bg-light);
            display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.9rem; color: var(--primary); flex-shrink: 0;
        }
        .mc-option.correct-choice .option-letter { background: var(--success); color: white; }
        .mc-option.incorrect-choice .option-letter { background: var(--error); color: white; }

        /* ========== Summary Slide ========== */
        .summary-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: var(--radius-lg); padding: 40px; color: white; text-align: center;
        }
        .summary-card h2 { font-size: 2rem; margin-bottom: 24px; }
        .summary-card > p { font-size: 1.1rem; opacity: 0.9; margin-bottom: 12px; }
        .summary-points { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 32px 0; }
        .summary-point { background: rgba(255,255,255,0.15); padding: 20px; border-radius: var(--radius); backdrop-filter: blur(10px); }
        .summary-point h4 { font-size: 1.1rem; margin-bottom: 8px; }
        .summary-point p { font-size: 0.9rem; opacity: 0.9; }
        .restart-btn {
            background: white; color: var(--primary); border: none; padding: 16px 48px;
            border-radius: 30px; font-size: 1.1rem; font-weight: 600; cursor: pointer;
            transition: var(--transition); margin-top: 24px;
        }
        .restart-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0,0,0,0.2); }

        /* ========== Animations ========== */
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .pulse { animation: pulse 2s infinite; }

        /* ========== Responsive ========== */
        @media (max-width: 768px) {
            .progress-header { flex-direction: column; gap: 12px; }
            .progress-bar-wrapper { width: 100%; max-width: none; }
            .progress-nav { width: 100%; justify-content: space-between; }
            .content-card, .quiz-card { padding: 24px; }
            .slide-header { flex-direction: column; align-items: flex-start; gap: 12px; }
            .example-japanese { font-size: 1.2rem; }
            .example-comparison { grid-template-columns: 1fr; }
            .comparison-grid { grid-template-columns: 1fr; }
            .triple-grid { grid-template-columns: 1fr; }
            .distance-grid { grid-template-columns: 1fr; gap: 12px; }
            .fill-blank { font-size: 1.1rem; }
            .data-table { font-size: 0.85rem; }
            .data-table th, .data-table td { padding: 10px 12px; }
            .conversation-line { font-size: 1.05rem; }
            .title-card { padding: 24px; }
            .summary-points { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 480px) {
            .progress-title { font-size: 0.8rem; }
            .nav-btn { padding: 6px 12px; font-size: 0.8rem; }
            .title-slide h1 { font-size: 2rem; }
            .grammar-item { padding: 10px 12px; font-size: 0.9rem; }
            .summary-points { grid-template-columns: 1fr; }
            .mc-option { padding: 12px 16px; font-size: 1rem; }
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-header">
            <div class="progress-title">
                <span class="lesson-badge">L3</span>
                MNN Lesson 3 â€” ã“ã“/ãã“/ã‚ãã“
            </div>
            <div class="progress-bar-wrapper">
                <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                <div class="progress-text"><span id="currentSlide">1</span> / <span id="totalSlides">20</span></div>
            </div>
            <div class="progress-nav">
                <button class="nav-btn" id="prevBtn" onclick="prevSlide()">â—€ <span class="btn-text">Back</span></button>
                <button class="nav-btn" id="nextBtn" onclick="nextSlide()"><span class="btn-text">Next</span> â–¶</button>
            </div>
        </div>
    </div>

    <div class="presentation">

        <!-- ======================== SLIDE 1: Title ======================== -->
        <div class="slide active" data-slide="1">
            <div class="title-slide">
                <div class="book-badge">ã¿ã‚“ãªã®<ruby>æ—¥æœ¬èª<rt>ã«ã»ã‚“ã”</rt></ruby> <ruby>åˆç´š<rt>ã—ã‚‡ãã‚…ã†</rt></ruby> I â€” <ruby>ç¬¬<rt>ã ã„</rt></ruby>2<ruby>ç‰ˆ<rt>ã¯ã‚“</rt></ruby></div>
                <h1>Lesson 3</h1>
                <div class="lesson-title-jp">ã“ã“ãƒ»ãã“ãƒ»ã‚ãã“ â€” Places &amp; Locations</div>
                <div class="lesson-subtitle">Learn to talk about where things are, ask for directions, and identify product origins</div>

                <div class="title-card">
                    <h2>ğŸ“š Grammar Points</h2>
                    <div class="grammar-list">
                        <div class="grammar-item">
                            <span class="grammar-number">1</span>
                            <span><strong>ã“ã“ / ãã“ / ã‚ãã“</strong> â€” Here / There / Over there (places)</span>
                        </div>
                        <div class="grammar-item">
                            <span class="grammar-number">2</span>
                            <span><strong>ã“ã¡ã‚‰ / ãã¡ã‚‰ / ã‚ã¡ã‚‰</strong> â€” Polite direction alternatives</span>
                        </div>
                        <div class="grammar-item">
                            <span class="grammar-number">3</span>
                            <span><strong>N ã¯ place ã§ã™</strong> â€” Stating where things/people are</span>
                        </div>
                        <div class="grammar-item">
                            <span class="grammar-number">4</span>
                            <span><strong>ã©ã“ / ã©ã¡ã‚‰</strong> â€” Where? / Which direction?</span>
                        </div>
                        <div class="grammar-item">
                            <span class="grammar-number">5</span>
                            <span><strong>Nâ‚ ã® Nâ‚‚</strong> â€” Country/company of origin</span>
                        </div>
                        <div class="grammar-item">
                            <span class="grammar-number">6</span>
                            <span><strong>ã“/ã/ã‚/ã© Complete Chart</strong> + ãŠã€œ polite prefix</span>
                        </div>
                    </div>
                </div>
                <button class="start-btn pulse" onclick="nextSlide()">ğŸ¯ Let's Begin!</button>
            </div>
        </div>

        <!-- ======================== SLIDE 2: ã“ã“/ãã“/ã‚ãã“ ======================== -->
        <div class="slide" data-slide="2">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">Grammar 1</span>
                    <div>
                        <h2>ã“ã“ / ãã“ / ã‚ãã“</h2>
                        <span class="jp-title">Place Demonstratives</span>
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ“– How it works</h3>
                    <p>In Lesson 2, you learned ã“ã‚Œ/ãã‚Œ/ã‚ã‚Œ for <strong>things</strong>. Now the same ko-so-a distance logic applies to <strong>places</strong>! The three-way system uses the same perspective: near the speaker, near the listener, and far from both.</p>
                </div>

                <div class="visual-diagram">
                    <div class="label">ğŸ“ Place Distance Diagram</div>
                    <div class="distance-grid">
                        <div class="distance-item">
                            <span class="distance-emoji">ğŸ™‹â€â™‚ï¸ğŸ“</span>
                            <span class="distance-jp">ã“ã“</span>
                            <span class="distance-en">here</span>
                            <span class="distance-desc">Where the <strong>speaker</strong> is</span>
                        </div>
                        <div class="distance-item">
                            <span class="distance-emoji">ğŸ™‹â€â™‚ï¸ â†” ğŸ“ğŸ™‹â€â™€ï¸</span>
                            <span class="distance-jp">ãã“</span>
                            <span class="distance-en">there</span>
                            <span class="distance-desc">Where the <strong>listener</strong> is</span>
                        </div>
                        <div class="distance-item">
                            <span class="distance-emoji">ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™€ï¸ â†”â†” ğŸ“</span>
                            <span class="distance-jp">ã‚ãã“</span>
                            <span class="distance-en">over there</span>
                            <span class="distance-desc">Far from <strong>both</strong></span>
                        </div>
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ”¹ Special Case: Shared Space</h3>
                    <p>When the speaker considers the listener to be sharing the <em>same territory</em> (for example, both standing in the same room), their shared space becomes <strong>ã“ã“</strong>. In this situation, ãã“ refers to a place slightly distant from both of them, and ã‚ãã“ is even further away.</p>
                </div>

                <div class="key-point">
                    <strong>ğŸ’¡ Key Point:</strong> The ko-so-a pattern is beautifully consistent in Japanese: ã“ = near me, ã = near you, ã‚ = far from us both. Whether it's things (ã“ã‚Œ), modifiers (ã“ã®), or places (ã“ã“), the logic never changes!
                </div>

                <div class="ref-connection">
                    <button class="ref-toggle" onclick="toggleRef(this)">
                        ğŸ“˜ Minna no Nihongo Connections (Lessons 1â€“25)
                        <span class="icon">â–¼</span>
                    </button>
                    <div class="ref-content">
                        <h4>Building on L1-L2 &amp; Looking Ahead:</h4>
                        <p><span class="ref-badge">L2</span> ã“ã‚Œ/ãã‚Œ/ã‚ã‚Œ (things) â†’ now ã“ã“/ãã“/ã‚ãã“ (places) â€” same system, new category!</p>
                        <p><span class="ref-badge">L10</span> ã“ã“ ã« N ãŒ ã‚ã‚Šã¾ã™/ã„ã¾ã™ â€” combining places with existence verbs.</p>
                        <p><span class="ref-badge">L14</span> ã“ã“ã§ <ruby>å¾…<rt>ã¾</rt></ruby>ã£ã¦ãã ã•ã„ ("Please wait here") â€” places with ã¦-form requests.</p>
                        <p><span class="ref-badge">L23</span> ã“ã“ã‚’ <ruby>å³<rt>ã¿ã</rt></ruby>ã« <ruby>æ›²<rt>ã¾</rt></ruby>ãŒã£ã¦ãã ã•ã„ ("Turn right here") â€” directions.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 3: ã“ã¡ã‚‰/ãã¡ã‚‰/ã‚ã¡ã‚‰ ======================== -->
        <div class="slide" data-slide="3">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">Grammar 2</span>
                    <div>
                        <h2>ã“ã¡ã‚‰ / ãã¡ã‚‰ / ã‚ã¡ã‚‰</h2>
                        <span class="jp-title">Polite Direction Words</span>
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ“– How it works</h3>
                    <p><strong>ã“ã¡ã‚‰</strong>, <strong>ãã¡ã‚‰</strong>, and <strong>ã‚ã¡ã‚‰</strong> refer to <strong>direction</strong> and can also be used as politer alternatives for ã“ã“, ãã“, and ã‚ãã“. When speaking to customers, strangers, or in formal situations, ã“ã¡ã‚‰/ãã¡ã‚‰/ã‚ã¡ã‚‰ sounds much more refined.</p>
                </div>

                <div class="triple-grid">
                    <div class="ko-box">
                        <div class="box-label">ğŸ”µ ã“ã¡ã‚‰</div>
                        <div class="example-japanese" style="font-size: 1.2rem;">this way / here</div>
                        <div class="example-english" style="margin-top: 6px;">Polite ã“ã“</div>
                    </div>
                    <div class="so-box">
                        <div class="box-label">ğŸŸ¢ ãã¡ã‚‰</div>
                        <div class="example-japanese" style="font-size: 1.2rem;">that way / there</div>
                        <div class="example-english" style="margin-top: 6px;">Polite ãã“</div>
                    </div>
                    <div class="a-box">
                        <div class="box-label">ğŸ©· ã‚ã¡ã‚‰</div>
                        <div class="example-japanese" style="font-size: 1.2rem;">that way (far) / over there</div>
                        <div class="example-english" style="margin-top: 6px;">Polite ã‚ãã“</div>
                    </div>
                </div>

                <div class="conversation-box">
                    <div class="example-label">ğŸ’¬ Example â‘¤ â€” Asking for directions</div>
                    <div class="conversation-line">
                        <span class="speaker">A:</span> ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã¯ <strong>ã©ã¡ã‚‰</strong>ã§ã™ã‹ã€‚
                    </div>
                    <div class="conversation-translation" style="margin-bottom:12px; margin-left: 28px;">Where's the lift?</div>
                    <div class="conversation-line">
                        <span class="speaker b">B:</span> <strong>ã‚ã¡ã‚‰</strong>ã§ã™ã€‚
                    </div>
                    <div class="conversation-translation" style="margin-left: 28px;">It's in that direction. / It's over there.</div>
                </div>

                <div class="example-comparison">
                    <div class="polite-box">
                        <div class="style-label">ğŸ© Polite (formal / service)</div>
                        <div class="example-japanese" style="font-size: 1.15rem;"><strong>ã“ã¡ã‚‰</strong>ã§ã™ã€‚</div>
                        <div class="example-english">It's this way. (refined)</div>
                    </div>
                    <div class="plain-box">
                        <div class="style-label">ğŸ’¬ Casual (everyday)</div>
                        <div class="example-japanese" style="font-size: 1.15rem;"><strong>ã“ã“</strong>ã§ã™ã€‚</div>
                        <div class="example-english">It's here. (normal)</div>
                    </div>
                </div>

                <div class="key-point">
                    <strong>ğŸ’¡ Key Point:</strong> You'll hear ã“ã¡ã‚‰ everywhere in Japan â€” at stores, restaurants, and hotels. Staff say ã“ã¡ã‚‰ã¸ã©ã†ã ("This way, please") constantly. It's one of the first real-world Japanese phrases you'll recognize!
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 4: Quiz 1 ======================== -->
        <div class="slide" data-slide="4">
            <div class="quiz-card">
                <div class="quiz-header">
                    <span class="quiz-badge">âœï¸ Quick Check</span>
                    <h2>ã“ã“/ãã“/ã‚ãã“ &amp; ã“ã¡ã‚‰/ãã¡ã‚‰/ã‚ã¡ã‚‰</h2>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 1 of 2</div>
                    <div class="question-context">You and your friend are standing together in a lobby. You both see a restroom sign far away.</div>
                    <div class="question-text">Which word describes where the restroom is?</div>
                    <div class="mc-options" id="q1-options">
                        <div class="mc-option" onclick="checkMC('q1', this, 'C')"><span class="option-letter">A</span><span>ã“ã“ â€” here</span></div>
                        <div class="mc-option" onclick="checkMC('q1', this, 'C')"><span class="option-letter">B</span><span>ãã“ â€” there (near listener)</span></div>
                        <div class="mc-option" onclick="checkMC('q1', this, 'C')"><span class="option-letter">C</span><span>ã‚ãã“ â€” over there (far from both)</span></div>
                    </div>
                    <div class="feedback-area" id="q1-feedback"></div>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 2 of 2</div>
                    <div class="question-context">A hotel staff member wants to politely say "It's this way."</div>
                    <div class="question-text">Which is more appropriate for a staff member?</div>
                    <div class="mc-options" id="q2-options">
                        <div class="mc-option" onclick="checkMC('q2', this, 'B')"><span class="option-letter">A</span><span>ã“ã“ã§ã™ã€‚</span></div>
                        <div class="mc-option" onclick="checkMC('q2', this, 'B')"><span class="option-letter">B</span><span>ã“ã¡ã‚‰ã§ã™ã€‚</span></div>
                    </div>
                    <div class="feedback-area" id="q2-feedback"></div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 5: N ã¯ place ã§ã™ ======================== -->
        <div class="slide" data-slide="5">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">Grammar 3</span>
                    <div>
                        <h2>N ã¯ place ã§ã™</h2>
                        <span class="jp-title">ã€œã¯ ã€œã§ã™ï¼ˆ<ruby>å ´æ‰€<rt>ã°ã—ã‚‡</rt></ruby>ï¼‰</span>
                    </div>
                </div>

                <div class="structure-box">
                    <div class="label">ğŸ“ Structure</div>
                    <div class="structure-formula">
                        <span class="highlight">N (thing/person)</span> + <span class="accent">ã¯</span> + <span class="highlight">Place</span> + <span class="accent">ã§ã™</span>ã€‚
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ“– How it works</h3>
                    <p>This is the same Nâ‚ ã¯ Nâ‚‚ ã§ã™ pattern from Lesson 1, but now Nâ‚‚ is a <strong>place</strong>. You can use it to state where a thing, person, or facility is located. The subject goes before ã¯, and the location goes after it.</p>
                </div>

                <div class="example-box">
                    <div class="example-label">ğŸ“ Example â‘ </div>
                    <div class="example-japanese">ãŠ<ruby>æ‰‹æ´—<rt>ã¦ã‚ã‚‰</rt></ruby>ã„ã¯ ã‚ãã“ã§ã™ã€‚</div>
                    <div class="example-english">The toilet is over there.</div>
                </div>
                <div class="example-box">
                    <div class="example-label">ğŸ“ Example â‘¡</div>
                    <div class="example-japanese"><ruby>é›»è©±<rt>ã§ã‚“ã‚</rt></ruby>ã¯ 2<ruby>éš<rt>ã‹ã„</rt></ruby>ã§ã™ã€‚</div>
                    <div class="example-english">The telephone is on the second floor.</div>
                </div>
                <div class="example-box">
                    <div class="example-label">ğŸ“ Example â‘¢</div>
                    <div class="example-japanese"><ruby>å±±ç”°<rt>ã‚„ã¾ã </rt></ruby>ã•ã‚“ã¯ <ruby>äº‹å‹™æ‰€<rt>ã˜ã‚€ã—ã‚‡</rt></ruby>ã§ã™ã€‚</div>
                    <div class="example-english">Mr. Yamada is in his office.</div>
                </div>

                <div class="key-point">
                    <strong>ğŸ’¡ Key Point:</strong> This pattern works for both things AND people! When used with a person, it means "that person is at [place]." It's essentially the same structure you mastered in L1 â€” only the type of information in Nâ‚‚ has changed from identity to location.
                </div>

                <div class="ref-connection">
                    <button class="ref-toggle" onclick="toggleRef(this)">
                        ğŸ“˜ Minna no Nihongo Connections (Lessons 1â€“25)
                        <span class="icon">â–¼</span>
                    </button>
                    <div class="ref-content">
                        <h4>Location patterns evolve:</h4>
                        <p><span class="ref-badge">L1</span> Nâ‚ ã¯ Nâ‚‚ ã§ã™ (identity) â†’ now N ã¯ place ã§ã™ (location) â€” same structure, new meaning!</p>
                        <p><span class="ref-badge">L10</span> More precise locations: ã¤ããˆã® <ruby>ä¸Š<rt>ã†ãˆ</rt></ruby>ã« <ruby>æœ¬<rt>ã»ã‚“</rt></ruby>ãŒ ã‚ã‚Šã¾ã™ ("There's a book on the desk").</p>
                        <p><span class="ref-badge">L11</span> Counting with locations: <ruby>æ•™å®¤<rt>ãã‚‡ã†ã—ã¤</rt></ruby>ã« <ruby>å­¦ç”Ÿ<rt>ãŒãã›ã„</rt></ruby>ãŒ 3<ruby>äºº<rt>ã«ã‚“</rt></ruby> ã„ã¾ã™ ("There are 3 students in the classroom").</p>
                        <p><span class="ref-badge">L15</span> Activities at locations: <ruby>å…¬åœ’<rt>ã“ã†ãˆã‚“</rt></ruby>ã§ ã‚µãƒƒã‚«ãƒ¼ã‚’ ã—ã¾ã™ ("I play soccer at the park").</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 6: Quiz 2 ======================== -->
        <div class="slide" data-slide="6">
            <div class="quiz-card">
                <div class="quiz-header">
                    <span class="quiz-badge">âœï¸ Quick Check</span>
                    <h2>N ã¯ place ã§ã™ â€” Comprehension</h2>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 1 of 2</div>
                    <div class="question-context">Translate: "The reception is on the 1st floor."</div>
                    <div class="question-text">Fill in the blank:</div>
                    <div class="fill-blank">
                        <ruby>å—ä»˜<rt>ã†ã‘ã¤ã‘</rt></ruby>ã¯
                        <input type="text" class="blank-input" id="q3-input" placeholder="ï¼Ÿ" style="min-width: 100px;">
                        ã§ã™ã€‚
                    </div>
                    <button class="check-btn" onclick="checkFillBlank('q3', ['1éš','1ã‹ã„','ã„ã£ã‹ã„'], '1éšï¼ˆã„ã£ã‹ã„ï¼‰', 'The place (1éš = first floor) goes after ã¯. This is the N ã¯ place ã§ã™ pattern.')">Check â†’</button>
                    <div class="feedback-area" id="q3-feedback"></div>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 2 of 2</div>
                    <div class="question-context"><ruby>ç”°ä¸­<rt>ãŸãªã‹</rt></ruby>ã•ã‚“ã¯ <ruby>é£Ÿå ‚<rt>ã—ã‚‡ãã©ã†</rt></ruby>ã§ã™ã€‚ What does this mean?</div>
                    <div class="question-text">Choose the best translation:</div>
                    <div class="mc-options" id="q4-options">
                        <div class="mc-option" onclick="checkMC('q4', this, 'B')"><span class="option-letter">A</span><span>Mr. Tanaka is a cafeteria.</span></div>
                        <div class="mc-option" onclick="checkMC('q4', this, 'B')"><span class="option-letter">B</span><span>Mr. Tanaka is in the cafeteria.</span></div>
                        <div class="mc-option" onclick="checkMC('q4', this, 'B')"><span class="option-letter">C</span><span>Mr. Tanaka likes the cafeteria.</span></div>
                    </div>
                    <div class="feedback-area" id="q4-feedback"></div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 7: ã©ã“ / ã©ã¡ã‚‰ ======================== -->
        <div class="slide" data-slide="7">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">Grammar 4</span>
                    <div>
                        <h2>ã©ã“ / ã©ã¡ã‚‰</h2>
                        <span class="jp-title">Where? / Which direction?</span>
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ“– How it works</h3>
                    <p><strong>ã©ã“</strong> means "where?" and is used for asking the location of something. <strong>ã©ã¡ã‚‰</strong> is the politer version, and it can also mean "which direction?" Just as ã“ã¡ã‚‰/ãã¡ã‚‰/ã‚ã¡ã‚‰ are polite forms of ã“ã“/ãã“/ã‚ãã“, ã©ã¡ã‚‰ is the polite form of ã©ã“.</p>
                    <p>Both ã©ã“ and ã©ã¡ã‚‰ can also be used to ask about a person's <strong>country, company, school, or organization</strong>. In this usage, ãªã‚“ ("what") cannot be used â€” only ã©ã“ or ã©ã¡ã‚‰.</p>
                </div>

                <div class="conversation-box">
                    <div class="example-label">ğŸ’¬ Example â‘£ â€” Asking where</div>
                    <div class="conversation-line"><span class="speaker">A:</span> ãŠ<ruby>æ‰‹æ´—<rt>ã¦ã‚ã‚‰</rt></ruby>ã„ã¯ <strong>ã©ã“</strong>ã§ã™ã‹ã€‚</div>
                    <div class="conversation-translation" style="margin-bottom:12px; margin-left: 28px;">Where's the toilet?</div>
                    <div class="conversation-line"><span class="speaker b">B:</span> ã‚ãã“ã§ã™ã€‚</div>
                    <div class="conversation-translation" style="margin-left: 28px;">It's over there.</div>
                </div>

                <div class="conversation-box">
                    <div class="example-label">ğŸ’¬ Example â‘¥ â€” Asking about school/company</div>
                    <div class="conversation-line"><span class="speaker">A:</span> <ruby>å­¦æ ¡<rt>ãŒã£ã“ã†</rt></ruby>ã¯ <strong>ã©ã“</strong>ã§ã™ã‹ã€‚</div>
                    <div class="conversation-translation" style="margin-bottom:12px; margin-left: 28px;">What school do you go to? (lit. "Where is your school?")</div>
                    <div class="conversation-line"><span class="speaker">A:</span> <ruby>ä¼šç¤¾<rt>ã‹ã„ã—ã‚ƒ</rt></ruby>ã¯ <strong>ã©ã¡ã‚‰</strong>ã§ã™ã‹ã€‚</div>
                    <div class="conversation-translation" style="margin-left: 28px;">What company do you work for? (polite)</div>
                </div>

                <div class="example-comparison">
                    <div class="polite-box">
                        <div class="style-label">ğŸ© ã©ã¡ã‚‰ (polite)</div>
                        <div class="example-japanese" style="font-size: 1.1rem;"><ruby>ä¼šç¤¾<rt>ã‹ã„ã—ã‚ƒ</rt></ruby>ã¯ <strong>ã©ã¡ã‚‰</strong>ã§ã™ã‹ã€‚</div>
                        <div class="example-english">What company? (refined)</div>
                    </div>
                    <div class="plain-box">
                        <div class="style-label">ğŸ’¬ ã©ã“ (everyday)</div>
                        <div class="example-japanese" style="font-size: 1.1rem;"><ruby>å­¦æ ¡<rt>ãŒã£ã“ã†</rt></ruby>ã¯ <strong>ã©ã“</strong>ã§ã™ã‹ã€‚</div>
                        <div class="example-english">What school? (casual polite)</div>
                    </div>
                </div>

                <div class="key-point">
                    <strong>ğŸ’¡ Key Point:</strong> When asking "What school/company/country?", use <strong>ã©ã“</strong> or <strong>ã©ã¡ã‚‰</strong> â€” NOT ãªã‚“. Saying Ã— <ruby>å­¦æ ¡<rt>ãŒã£ã“ã†</rt></ruby>ã¯ <ruby>ä½•<rt>ãªã‚“</rt></ruby>ã§ã™ã‹ is unnatural. Think of it as "Where is your school affiliated?" rather than "What is your school?"
                </div>

                <div class="ref-connection">
                    <button class="ref-toggle" onclick="toggleRef(this)">
                        ğŸ“˜ Minna no Nihongo Connections (Lessons 1â€“25)
                        <span class="icon">â–¼</span>
                    </button>
                    <div class="ref-content">
                        <h4>Question words grow lesson by lesson:</h4>
                        <p><span class="ref-badge">L1</span> ã©ãªãŸ = who (polite). Now you have ã©ã“/ã©ã¡ã‚‰ = where.</p>
                        <p><span class="ref-badge">L2</span> <ruby>ä½•<rt>ãªã‚“</rt></ruby> = what. Remember: use ã©ã“ (not ãªã‚“) for organizations.</p>
                        <p><span class="ref-badge">L4</span> ã„ã¤ = when, <ruby>ä½•æ™‚<rt>ãªã‚“ã˜</rt></ruby> = what time â€” more interrogatives!</p>
                        <p><span class="ref-badge">L9</span> ã©ã†ã—ã¦ = why â€” completing the major question word set.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 8: Quiz 3 ======================== -->
        <div class="slide" data-slide="8">
            <div class="quiz-card">
                <div class="quiz-header">
                    <span class="quiz-badge">âœï¸ Quick Check</span>
                    <h2>ã©ã“ / ã©ã¡ã‚‰ â€” Comprehension</h2>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 1 of 2</div>
                    <div class="question-context">You want to politely ask someone: "Where is the elevator?"</div>
                    <div class="question-text">Fill in the blank:</div>
                    <div class="fill-blank">
                        ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã¯
                        <input type="text" class="blank-input" id="q5-input" placeholder="ï¼Ÿ" style="min-width: 100px;">
                        ã§ã™ã‹ã€‚
                    </div>
                    <button class="check-btn" onclick="checkFillBlank('q5', ['ã©ã“','ã©ã¡ã‚‰'], 'ã©ã“ / ã©ã¡ã‚‰', 'Both ã©ã“ and ã©ã¡ã‚‰ work here. ã©ã¡ã‚‰ is more polite and also implies direction â€” perfect for asking about the location of something in a building.')">Check â†’</button>
                    <div class="feedback-area" id="q5-feedback"></div>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 2 of 2</div>
                    <div class="question-context">You want to ask "What company do you work for?" Which is correct?</div>
                    <div class="question-text">Choose the natural phrasing:</div>
                    <div class="mc-options" id="q6-options">
                        <div class="mc-option" onclick="checkMC('q6', this, 'B')"><span class="option-letter">A</span><span><ruby>ä¼šç¤¾<rt>ã‹ã„ã—ã‚ƒ</rt></ruby>ã¯ <ruby>ä½•<rt>ãªã‚“</rt></ruby>ã§ã™ã‹ã€‚</span></div>
                        <div class="mc-option" onclick="checkMC('q6', this, 'B')"><span class="option-letter">B</span><span><ruby>ä¼šç¤¾<rt>ã‹ã„ã—ã‚ƒ</rt></ruby>ã¯ ã©ã¡ã‚‰ã§ã™ã‹ã€‚</span></div>
                        <div class="mc-option" onclick="checkMC('q6', this, 'B')"><span class="option-letter">C</span><span><ruby>ä¼šç¤¾<rt>ã‹ã„ã—ã‚ƒ</rt></ruby>ã¯ ã ã‚Œã§ã™ã‹ã€‚</span></div>
                    </div>
                    <div class="feedback-area" id="q6-feedback"></div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 9: Nâ‚ ã® Nâ‚‚ (Origin) ======================== -->
        <div class="slide" data-slide="9">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">Grammar 5</span>
                    <div>
                        <h2>Nâ‚ ã® Nâ‚‚ â€” Origin</h2>
                        <span class="jp-title">ã€œã®ã€œï¼ˆ<ruby>ç”£åœ°<rt>ã•ã‚“ã¡</rt></ruby>ãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼ï¼‰</span>
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ“– How it works</h3>
                    <p>You've already seen ã® for affiliation (L1), topic/ownership (L2). Now in Lesson 3, ã® expands again to indicate <strong>where a product is made</strong> or <strong>which company makes it</strong>.</p>
                    <p>When Nâ‚ is a <strong>country</strong>, it means the product is made <em>in</em> that country. When Nâ‚ is a <strong>company</strong>, it means the product is made <em>by</em> that company. The interrogative <strong>ã©ã“</strong> is used to ask about origin.</p>
                </div>

                <div class="conversation-box">
                    <div class="example-label">ğŸ’¬ Example â‘§ â€” Asking about origin</div>
                    <div class="conversation-line"><span class="speaker">A:</span> ã“ã‚Œã¯ <strong>ã©ã“</strong>ã® ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§ã™ã‹ã€‚</div>
                    <div class="conversation-translation" style="margin-bottom:12px; margin-left: 28px;">Where is this computer made? / What company is this computer made by?</div>
                    <div class="conversation-line"><span class="speaker b">B:</span> <ruby>æ—¥æœ¬<rt>ã«ã»ã‚“</rt></ruby>ã® ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚</div>
                    <div class="conversation-translation" style="margin-bottom:12px; margin-left: 28px;">It's made in Japan.</div>
                    <div class="conversation-line"><span class="speaker b">B:</span> ãƒ‘ãƒ¯ãƒ¼<ruby>é›»æ°—<rt>ã§ã‚“ã</rt></ruby>ã® ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚</div>
                    <div class="conversation-translation" style="margin-left: 28px;">It's made by Power Electric Company.</div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Use of ã®</th>
                                <th>Nâ‚</th>
                                <th>ã®</th>
                                <th>Nâ‚‚</th>
                                <th>Meaning</th>
                                <th>Lesson</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Affiliation</td><td>IMC</td><td class="arrow">ã®</td><td><ruby>ç¤¾å“¡<rt>ã—ã‚ƒã„ã‚“</rt></ruby></td><td>IMC's employee</td><td>L1</td></tr>
                            <tr><td>Topic</td><td>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼</td><td class="arrow">ã®</td><td><ruby>æœ¬<rt>ã»ã‚“</rt></ruby></td><td>book about computers</td><td>L2</td></tr>
                            <tr><td>Ownership</td><td>ã‚ãŸã—</td><td class="arrow">ã®</td><td><ruby>æœ¬<rt>ã»ã‚“</rt></ruby></td><td>my book</td><td>L2</td></tr>
                            <tr style="background: #faf5ff;"><td><strong>Made in</strong></td><td><ruby>æ—¥æœ¬<rt>ã«ã»ã‚“</rt></ruby></td><td class="arrow">ã®</td><td>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼</td><td>computer made in Japan</td><td><strong>L3</strong></td></tr>
                            <tr style="background: #faf5ff;"><td><strong>Made by</strong></td><td>ãƒ‘ãƒ¯ãƒ¼<ruby>é›»æ°—<rt>ã§ã‚“ã</rt></ruby></td><td class="arrow">ã®</td><td>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼</td><td>computer by Power Electric</td><td><strong>L3</strong></td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="key-point">
                    <strong>ğŸ’¡ Key Point:</strong> The particle ã® is the Swiss Army knife of Japanese! Each lesson adds a new use. By now you have 5 different meanings â€” but the structure (Nâ‚ ã® Nâ‚‚) never changes. Context tells you which meaning to use.
                </div>

                <div class="ref-connection">
                    <button class="ref-toggle" onclick="toggleRef(this)">
                        ğŸ“˜ Minna no Nihongo Connections (Lessons 1â€“25)
                        <span class="icon">â–¼</span>
                    </button>
                    <div class="ref-content">
                        <h4>The ever-growing ã®:</h4>
                        <p><span class="ref-badge">L1</span> Affiliation â†’ <span class="ref-badge">L2</span> Topic/Ownership â†’ <span class="ref-badge">L3</span> Origin/Maker</p>
                        <p><span class="ref-badge">L5</span> Material/type: <ruby>æœ¨<rt>ã</rt></ruby>ã® ãƒ†ãƒ¼ãƒ–ãƒ« ("wooden table").</p>
                        <p><span class="ref-badge">L8</span> Description: <ruby>æ—¥æœ¬<rt>ã«ã»ã‚“</rt></ruby>ã® <ruby>æ˜ ç”»<rt>ãˆã„ãŒ</rt></ruby> ("Japanese movie").</p>
                        <p><span class="ref-badge">L22</span> Nominalizer: <ruby>é£Ÿ<rt>ãŸ</rt></ruby>ã¹ã‚‹ã®ãŒ <ruby>å¥½<rt>ã™</rt></ruby>ãã§ã™ ("I like eating") â€” ã® turns verbs into nouns!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 10: Quiz 4 ======================== -->
        <div class="slide" data-slide="10">
            <div class="quiz-card">
                <div class="quiz-header">
                    <span class="quiz-badge">âœï¸ Quick Check</span>
                    <h2>Nâ‚ ã® Nâ‚‚ (Origin) â€” Comprehension</h2>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 1 of 2</div>
                    <div class="question-context">What does ã“ã‚Œã¯ <ruby>æ—¥æœ¬<rt>ã«ã»ã‚“</rt></ruby>ã® <ruby>è»Š<rt>ãã‚‹ã¾</rt></ruby>ã§ã™ mean?</div>
                    <div class="question-text">Choose the best translation:</div>
                    <div class="mc-options" id="q7-options">
                        <div class="mc-option" onclick="checkMC('q7', this, 'C')"><span class="option-letter">A</span><span>This is a car in Japan.</span></div>
                        <div class="mc-option" onclick="checkMC('q7', this, 'C')"><span class="option-letter">B</span><span>This car belongs to Japan.</span></div>
                        <div class="mc-option" onclick="checkMC('q7', this, 'C')"><span class="option-letter">C</span><span>This is a Japanese (made in Japan) car.</span></div>
                    </div>
                    <div class="feedback-area" id="q7-feedback"></div>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 2 of 2</div>
                    <div class="question-context">You want to ask: "Which company made this camera?"</div>
                    <div class="question-text">Fill in the blank:</div>
                    <div class="fill-blank">
                        ã“ã‚Œã¯
                        <input type="text" class="blank-input" id="q8-input" placeholder="ï¼Ÿ" style="min-width: 80px;">
                        ã® ã‚«ãƒ¡ãƒ©ã§ã™ã‹ã€‚
                    </div>
                    <button class="check-btn" onclick="checkFillBlank('q8', ['ã©ã“'], 'ã©ã“', 'ã©ã“ã® N = &quot;where is N from?&quot; or &quot;which company\'s N?&quot; â€” ã©ã“ is the interrogative for origin questions with ã®.')">Check â†’</button>
                    <div class="feedback-area" id="q8-feedback"></div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 11: Complete ã“/ã/ã‚/ã© Chart ======================== -->
        <div class="slide" data-slide="11">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">Grammar 6</span>
                    <div>
                        <h2>ã“ / ã / ã‚ / ã© System</h2>
                        <span class="jp-title"><ruby>æŒ‡ç¤ºè©<rt>ã—ã˜ã—</rt></ruby>ã®<ruby>ä¸€è¦§<rt>ã„ã¡ã‚‰ã‚“</rt></ruby></span>
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ“– The Big Picture</h3>
                    <p>After 3 lessons, you now know the <strong>complete demonstrative chart</strong>! The ã“/ã/ã‚ rows show distance (near me / near you / far from both), and the <strong>ã©</strong> column adds the question word ("which?" / "where?"). This is one of the most systematic and important patterns in all of Japanese.</p>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th class="th-ko">ã“ã€œ series</th>
                                <th class="th-so">ãã€œ series</th>
                                <th class="th-a">ã‚ã€œ series</th>
                                <th class="th-do">ã©ã€œ series</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Thing</strong></td>
                                <td>ã“ã‚Œ</td>
                                <td>ãã‚Œ</td>
                                <td>ã‚ã‚Œ</td>
                                <td>ã©ã‚Œ (L16)</td>
                            </tr>
                            <tr>
                                <td><strong>Thing/Person + N</strong></td>
                                <td>ã“ã® N</td>
                                <td>ãã® N</td>
                                <td>ã‚ã® N</td>
                                <td>ã©ã® N (L16)</td>
                            </tr>
                            <tr>
                                <td><strong>Place</strong></td>
                                <td>ã“ã“</td>
                                <td>ãã“</td>
                                <td>ã‚ãã“</td>
                                <td>ã©ã“</td>
                            </tr>
                            <tr>
                                <td><strong>Direction / Place (polite)</strong></td>
                                <td>ã“ã¡ã‚‰</td>
                                <td>ãã¡ã‚‰</td>
                                <td>ã‚ã¡ã‚‰</td>
                                <td>ã©ã¡ã‚‰</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="key-point">
                    <strong>ğŸ”‘ Master Tip:</strong> If you memorize this 4Ã—4 grid, you've learned 16 words with just one logical system! The prefixes (ã“/ã/ã‚/ã©) and the suffixes (ã€œã‚Œ/ã€œã®/ã€œã“/ã€œã¡ã‚‰) combine predictably. You'll add ã©ã‚Œ and ã©ã® in Lesson 16 to complete the grid.
                </div>

                <div class="ref-connection">
                    <button class="ref-toggle" onclick="toggleRef(this)">
                        ğŸ“˜ Minna no Nihongo Connections (Lessons 1â€“25)
                        <span class="icon">â–¼</span>
                    </button>
                    <div class="ref-content">
                        <h4>Chart milestones across lessons:</h4>
                        <p><span class="ref-badge">L2</span> ã“ã‚Œ/ãã‚Œ/ã‚ã‚Œ + ã“ã®/ãã®/ã‚ã® â€” things &amp; modifiers.</p>
                        <p><span class="ref-badge">L3</span> ã“ã“/ãã“/ã‚ãã“ + ã“ã¡ã‚‰/ãã¡ã‚‰/ã‚ã¡ã‚‰ + ã©ã“/ã©ã¡ã‚‰ â€” places &amp; directions.</p>
                        <p><span class="ref-badge">L16</span> ã©ã‚Œ/ã©ã® â€” "which one?" choosing from 3+ options (completes the ã© series!).</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 12: Quiz 5 â€” Full Chart ======================== -->
        <div class="slide" data-slide="12">
            <div class="quiz-card">
                <div class="quiz-header">
                    <span class="quiz-badge">âœï¸ Quick Check</span>
                    <h2>ã“/ã/ã‚/ã© Chart â€” Comprehension</h2>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 1 of 2</div>
                    <div class="question-context">Match the pattern! ã“ã‚Œ is to things as ã“ã“ is to ____.</div>
                    <div class="question-text">What category does ã“ã“ belong to?</div>
                    <div class="mc-options" id="q9-options">
                        <div class="mc-option" onclick="checkMC('q9', this, 'B')"><span class="option-letter">A</span><span>Thing + Noun modifier (like ã“ã®)</span></div>
                        <div class="mc-option" onclick="checkMC('q9', this, 'B')"><span class="option-letter">B</span><span>Place</span></div>
                        <div class="mc-option" onclick="checkMC('q9', this, 'B')"><span class="option-letter">C</span><span>Direction (polite)</span></div>
                    </div>
                    <div class="feedback-area" id="q9-feedback"></div>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 2 of 2</div>
                    <div class="question-context">What is the polite question word for "where?"</div>
                    <div class="question-text">Fill in the blank:</div>
                    <div class="fill-blank">
                        <ruby>å—ä»˜<rt>ã†ã‘ã¤ã‘</rt></ruby>ã¯
                        <input type="text" class="blank-input" id="q10-input" placeholder="ï¼Ÿ" style="min-width: 100px;">
                        ã§ã™ã‹ã€‚
                    </div>
                    <button class="check-btn" onclick="checkFillBlank('q10', ['ã©ã¡ã‚‰','ã©ã“'], 'ã©ã¡ã‚‰ (polite) / ã©ã“ (standard)', 'ã©ã¡ã‚‰ is the polite form of ã©ã“. Both are correct, but ã©ã¡ã‚‰ is preferred in formal situations like asking directions from staff.')">Check â†’</button>
                    <div class="feedback-area" id="q10-feedback"></div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 13: ãŠã€œ Polite Prefix ======================== -->
        <div class="slide" data-slide="13">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">Grammar 7</span>
                    <div>
                        <h2>ãŠã€œ Polite Prefix</h2>
                        <span class="jp-title">ãŠ + <ruby>è¨€è‘‰<rt>ã“ã¨ã°</rt></ruby> (Expanded)</span>
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ“– How it works</h3>
                    <p>You first saw ãŠ in Lesson 2 (ãŠã¿ã‚„ã’, ãŠã•ã‘). Now Lesson 3 deepens this: ãŠ is added to words related to <strong>the listener or a third party</strong> to show the speaker's respect toward them. It's a way of being courteous about things that belong to or are associated with others.</p>
                </div>

                <div class="example-box">
                    <div class="example-label">ğŸ“ Example â‘¨</div>
                    <div class="example-japanese">
                        [ãŠ]<ruby>å›½<rt>ãã«</rt></ruby>ã¯ ã©ã¡ã‚‰ã§ã™ã‹ã€‚
                    </div>
                    <div class="example-english">What country are you from? (polite â€” the ãŠ honors the listener's country)</div>
                </div>

                <div class="example-comparison">
                    <div class="polite-box">
                        <div class="style-label">ğŸ© With ãŠ (respectful)</div>
                        <div class="example-japanese" style="font-size: 1.1rem;"><strong>ãŠ</strong><ruby>åå‰<rt>ãªã¾ãˆ</rt></ruby>ã¯ï¼Ÿ</div>
                        <div class="example-english">Your name? (polite â€” other's name)</div>
                    </div>
                    <div class="plain-box">
                        <div class="style-label">ğŸ™‹ Without ãŠ (neutral/own)</div>
                        <div class="example-japanese" style="font-size: 1.1rem;"><ruby>åå‰<rt>ãªã¾ãˆ</rt></ruby>ã¯ <ruby>ç”°ä¸­<rt>ãŸãªã‹</rt></ruby>ã§ã™ã€‚</div>
                        <div class="example-english">My name is Tanaka. (no ãŠ for yourself)</div>
                    </div>
                </div>

                <div class="key-point">
                    <strong>ğŸ’¡ Key Point:</strong> Generally, don't use ãŠ for your <em>own</em> things â€” it's for showing respect toward <em>others'</em> things. Saying ãŠ<ruby>å›½<rt>ãã«</rt></ruby> about your own country sounds odd. The exception is set phrases like ãŠ<ruby>èŒ¶<rt>ã¡ã‚ƒ</rt></ruby> and ãŠã¿ã‚„ã’ where ãŠ is part of the standard word.
                </div>

                <div class="ref-connection">
                    <button class="ref-toggle" onclick="toggleRef(this)">
                        ğŸ“˜ Minna no Nihongo Connections (Lessons 1â€“25)
                        <span class="icon">â–¼</span>
                    </button>
                    <div class="ref-content">
                        <h4>Politeness continues building:</h4>
                        <p><span class="ref-badge">L1</span> ã•ã‚“ â€” the first honorific. <span class="ref-badge">L2</span> ãŠã¿ã‚„ã’, ãŠã•ã‘ â€” fixed polite words.</p>
                        <p><span class="ref-badge">L3</span> ãŠ<ruby>å›½<rt>ãã«</rt></ruby> â€” respectful when asking about someone else.</p>
                        <p><span class="ref-badge">L14</span> ãŠ<ruby>é¡˜<rt>ã­ãŒ</rt></ruby>ã„ã—ã¾ã™ â€” "Please" (polite request expression).</p>
                        <p><span class="ref-badge">L25</span> ãŠ + verb stem: ãŠ<ruby>å¾…<rt>ã¾</rt></ruby>ã¡ãã ã•ã„ ("Please wait") â€” full honorific verb form.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 14: Quiz 6 ======================== -->
        <div class="slide" data-slide="14">
            <div class="quiz-card">
                <div class="quiz-header">
                    <span class="quiz-badge">âœï¸ Quick Check</span>
                    <h2>ãŠã€œ Polite Prefix â€” Comprehension</h2>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 1 of 2</div>
                    <div class="question-context">You're politely asking someone their country of origin.</div>
                    <div class="question-text">Which is more polite?</div>
                    <div class="mc-options" id="q11-options">
                        <div class="mc-option" onclick="checkMC('q11', this, 'B')"><span class="option-letter">A</span><span><ruby>å›½<rt>ãã«</rt></ruby>ã¯ ã©ã¡ã‚‰ã§ã™ã‹ã€‚</span></div>
                        <div class="mc-option" onclick="checkMC('q11', this, 'B')"><span class="option-letter">B</span><span><strong>ãŠ</strong><ruby>å›½<rt>ãã«</rt></ruby>ã¯ ã©ã¡ã‚‰ã§ã™ã‹ã€‚</span></div>
                    </div>
                    <div class="feedback-area" id="q11-feedback"></div>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 2 of 2</div>
                    <div class="question-context">Should you use ãŠ when talking about YOUR OWN country?</div>
                    <div class="question-text">Choose the correct rule:</div>
                    <div class="mc-options" id="q12-options">
                        <div class="mc-option" onclick="checkMC('q12', this, 'B')"><span class="option-letter">A</span><span>Yes â€” always use ãŠ with å›½ regardless of whose country it is.</span></div>
                        <div class="mc-option" onclick="checkMC('q12', this, 'B')"><span class="option-letter">B</span><span>No â€” ãŠ is for the listener's/third person's things, not your own.</span></div>
                    </div>
                    <div class="feedback-area" id="q12-feedback"></div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 15: Review Table ======================== -->
        <div class="slide" data-slide="15">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">Review</span>
                    <div>
                        <h2>All Patterns at a Glance</h2>
                        <span class="jp-title"><ruby>æ–‡æ³•<rt>ã¶ã‚“ã½ã†</rt></ruby>ã®ã¾ã¨ã‚</span>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr><th>#</th><th>Pattern</th><th>Meaning</th><th>Example</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>1</td><td>ã“ã“/ãã“/ã‚ãã“</td><td>here/there/over there</td><td>ãŠ<ruby>æ‰‹æ´—<rt>ã¦ã‚ã‚‰</rt></ruby>ã„ã¯ ã‚ãã“ã§ã™ã€‚</td></tr>
                            <tr><td>2</td><td>ã“ã¡ã‚‰/ãã¡ã‚‰/ã‚ã¡ã‚‰</td><td>this way (polite)</td><td>ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã¯ ã‚ã¡ã‚‰ã§ã™ã€‚</td></tr>
                            <tr><td>3</td><td>N ã¯ place ã§ã™</td><td>N is at [place]</td><td><ruby>é›»è©±<rt>ã§ã‚“ã‚</rt></ruby>ã¯ 2<ruby>éš<rt>ã‹ã„</rt></ruby>ã§ã™ã€‚</td></tr>
                            <tr><td>4</td><td>ã©ã“ / ã©ã¡ã‚‰</td><td>where?</td><td><ruby>å­¦æ ¡<rt>ãŒã£ã“ã†</rt></ruby>ã¯ ã©ã“ã§ã™ã‹ã€‚</td></tr>
                            <tr><td>5</td><td>Nâ‚ã®Nâ‚‚ (origin)</td><td>made in/by</td><td><ruby>æ—¥æœ¬<rt>ã«ã»ã‚“</rt></ruby>ã® <ruby>è»Š<rt>ãã‚‹ã¾</rt></ruby></td></tr>
                            <tr><td>6</td><td>ãŠã€œ</td><td>polite prefix</td><td>ãŠ<ruby>å›½<rt>ãã«</rt></ruby>ã¯ ã©ã¡ã‚‰ã§ã™ã‹ã€‚</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="key-point">
                    <strong>ğŸ”‘ Remember:</strong> Lesson 3 completes the basic place system in the ko-so-a chart and gives you the power to ask "where?" â€” an essential survival skill in Japan! Combined with Lessons 1 &amp; 2, you can now introduce yourself, identify objects, and ask about locations.
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 16: Practice Conversation ======================== -->
        <div class="slide" data-slide="16">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">Practice</span>
                    <div>
                        <h2>Model Conversation</h2>
                        <span class="jp-title"><ruby>ä¼šè©±<rt>ã‹ã„ã‚</rt></ruby>ã‚Œã‚“ã—ã‚…ã†</span>
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ—£ï¸ Putting it all together</h3>
                    <p>Read through this conversation set in a department store. Can you find every Lesson 3 grammar point?</p>
                </div>

                <div class="conversation-box">
                    <div class="example-label">ğŸ’¬ At a Department Store</div>

                    <div class="conversation-line"><span class="speaker">ãƒŸãƒ©ãƒ¼:</span> ã™ã¿ã¾ã›ã‚“ã€‚<ruby>é£Ÿå ‚<rt>ã—ã‚‡ãã©ã†</rt></ruby>ã¯ <strong>ã©ã“</strong>ã§ã™ã‹ã€‚</div>
                    <div class="conversation-translation" style="margin-bottom:14px; margin-left: 50px;">Excuse me. Where is the cafeteria?</div>

                    <div class="conversation-line"><span class="speaker b"><ruby>åº—å“¡<rt>ã¦ã‚“ã„ã‚“</rt></ruby>:</span> <ruby>é£Ÿå ‚<rt>ã—ã‚‡ãã©ã†</rt></ruby>ã¯ 7<ruby>éš<rt>ã‹ã„</rt></ruby>ã§ã™ã€‚ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã¯ <strong>ã‚ã¡ã‚‰</strong>ã§ã™ã€‚</div>
                    <div class="conversation-translation" style="margin-bottom:14px; margin-left: 50px;">The cafeteria is on the 7th floor. The elevator is that way.</div>

                    <div class="conversation-line"><span class="speaker">ãƒŸãƒ©ãƒ¼:</span> ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã‚ã€ã“ã® <ruby>æ™‚è¨ˆ<rt>ã¨ã‘ã„</rt></ruby>ã¯ <strong>ã©ã“</strong>ã® <ruby>æ™‚è¨ˆ<rt>ã¨ã‘ã„</rt></ruby>ã§ã™ã‹ã€‚</div>
                    <div class="conversation-translation" style="margin-bottom:14px; margin-left: 50px;">Thank you. Oh, where is this watch made?</div>

                    <div class="conversation-line"><span class="speaker b"><ruby>åº—å“¡<rt>ã¦ã‚“ã„ã‚“</rt></ruby>:</span> <strong><ruby>æ—¥æœ¬<rt>ã«ã»ã‚“</rt></ruby>ã®</strong> <ruby>æ™‚è¨ˆ<rt>ã¨ã‘ã„</rt></ruby>ã§ã™ã€‚ã‚»ã‚¤ã‚³ãƒ¼ã®ã§ã™ã€‚</div>
                    <div class="conversation-translation" style="margin-bottom:14px; margin-left: 50px;">It's a Japanese watch. It's Seiko's.</div>

                    <div class="conversation-line"><span class="speaker">ãƒŸãƒ©ãƒ¼:</span> ãã†ã§ã™ã‹ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</div>
                    <div class="conversation-translation" style="margin-left: 50px;">I see. Thank you.</div>
                </div>

                <div class="key-point">
                    <strong>ğŸ” Spot the grammar!</strong> This conversation uses: ã©ã“ (where), N ã¯ place ã§ã™ (location), ã‚ã¡ã‚‰ (polite direction), ã©ã“ã® N (origin question), Nâ‚ã®Nâ‚‚ (origin), ã® as noun substitute (ã‚»ã‚¤ã‚³ãƒ¼ã®), and ãã†ã§ã™ã‹ (acknowledgment from L2). Can you find them all?
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 17: Comprehensive Final Quiz ======================== -->
        <div class="slide" data-slide="17">
            <div class="quiz-card">
                <div class="quiz-header">
                    <span class="quiz-badge">ğŸ† Final Quiz</span>
                    <h2>Lesson 3 â€” Comprehensive Check</h2>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 1 of 3</div>
                    <div class="question-context">You're at a hotel. You want to politely ask where the restaurant is.</div>
                    <div class="question-text">Fill in the blanks:</div>
                    <div class="fill-blank">
                        ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã¯
                        <input type="text" class="blank-input" id="q13-input" placeholder="ï¼Ÿ" style="min-width: 100px;">
                        ã§ã™ã‹ã€‚
                    </div>
                    <button class="check-btn" onclick="checkFillBlank('q13', ['ã©ã¡ã‚‰','ã©ã“'], 'ã©ã¡ã‚‰ (polite) / ã©ã“', 'Both work! ã©ã¡ã‚‰ is more polite and suitable for asking hotel staff. ã©ã“ is also correct in everyday situations.')">Check â†’</button>
                    <div class="feedback-area" id="q13-feedback"></div>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 2 of 3</div>
                    <div class="question-context">Someone shows you a camera and asks: ã“ã‚Œã¯ ã©ã“ã® ã‚«ãƒ¡ãƒ©ã§ã™ã‹ã€‚It was made by Sony.</div>
                    <div class="question-text">How do you answer?</div>
                    <div class="mc-options" id="q14-options">
                        <div class="mc-option" onclick="checkMC('q14', this, 'C')"><span class="option-letter">A</span><span>ãã‚Œã¯ ã‚«ãƒ¡ãƒ©ã§ã™ã€‚</span></div>
                        <div class="mc-option" onclick="checkMC('q14', this, 'C')"><span class="option-letter">B</span><span>ã¯ã„ã€ãã†ã§ã™ã€‚</span></div>
                        <div class="mc-option" onclick="checkMC('q14', this, 'C')"><span class="option-letter">C</span><span>ã‚½ãƒ‹ãƒ¼ã® ã‚«ãƒ¡ãƒ©ã§ã™ã€‚</span></div>
                    </div>
                    <div class="feedback-area" id="q14-feedback"></div>
                </div>
                <div class="quiz-question">
                    <div class="question-number">Question 3 of 3</div>
                    <div class="question-context">Complete this L1â€“L3 chain: ã“ã‚Œ = thing, ã“ã“ = place, ã“ã® = modifier + N.<br>What is the polite form of ã“ã“?</div>
                    <div class="question-text">Fill in the blank:</div>
                    <div class="fill-blank">
                        <input type="text" class="blank-input" id="q15-input" placeholder="ï¼Ÿ" style="min-width: 100px;">
                    </div>
                    <button class="check-btn" onclick="checkFillBlank('q15', ['ã“ã¡ã‚‰'], 'ã“ã¡ã‚‰', 'ã“ã¡ã‚‰ is the polite/direction form of ã“ã“. The full row: ã“ã“ (standard) â†’ ã“ã¡ã‚‰ (polite). Similarly: ãã“â†’ãã¡ã‚‰, ã‚ãã“â†’ã‚ã¡ã‚‰, ã©ã“â†’ã©ã¡ã‚‰.')">Check â†’</button>
                    <div class="feedback-area" id="q15-feedback"></div>
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 18: Lessons 1-3 Cumulative Review ======================== -->
        <div class="slide" data-slide="18">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">L1â€“L3</span>
                    <div>
                        <h2>Cumulative Review</h2>
                        <span class="jp-title">ãƒ¬ãƒƒã‚¹ãƒ³1ã€œ3 ã¾ã¨ã‚</span>
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ—ï¸ What you've built in 3 lessons</h3>
                    <p>After completing Lessons 1â€“3, you have a surprisingly powerful foundation. Here's a bird's-eye view of how the pieces fit together.</p>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead><tr><th>Skill</th><th>Lesson</th><th>Pattern</th></tr></thead>
                        <tbody>
                            <tr><td>Introduce yourself</td><td>L1</td><td>ã‚ãŸã—ã¯ ï½ã§ã™</td></tr>
                            <tr><td>Negate</td><td>L1</td><td>ï½ã˜ã‚ƒ ã‚ã‚Šã¾ã›ã‚“</td></tr>
                            <tr><td>Ask yes/no</td><td>L1</td><td>ï½ã§ã™ã‹</td></tr>
                            <tr><td>Say "also"</td><td>L1</td><td>ï½ã‚‚</td></tr>
                            <tr><td>Connect nouns</td><td>L1-3</td><td>Nâ‚ ã® Nâ‚‚ (5 uses!)</td></tr>
                            <tr><td>Identify things</td><td>L2</td><td>ã“ã‚Œ/ãã‚Œ/ã‚ã‚Œ + ã“ã®/ãã®/ã‚ã®</td></tr>
                            <tr><td>Confirm/deny</td><td>L2</td><td>ãã†ã§ã™ / ã¡ãŒã„ã¾ã™</td></tr>
                            <tr><td>Ask "A or B?"</td><td>L2</td><td>ï½ã§ã™ã‹ã€ï½ã§ã™ã‹</td></tr>
                            <tr><td>Talk about places</td><td>L3</td><td>ã“ã“/ãã“/ã‚ãã“ + ã“ã¡ã‚‰/ãã¡ã‚‰/ã‚ã¡ã‚‰</td></tr>
                            <tr><td>Ask "where?"</td><td>L3</td><td>ã©ã“ / ã©ã¡ã‚‰</td></tr>
                            <tr><td>Ask origin</td><td>L3</td><td>ã©ã“ã® N</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="key-point">
                    <strong>ğŸ¯ You can now:</strong> Introduce yourself, identify objects, ask where things are, ask about origins, confirm or deny facts, and use polite language. That's real-world communication!
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 19: What's Next ======================== -->
        <div class="slide" data-slide="19">
            <div class="content-card">
                <div class="slide-header">
                    <span class="grammar-badge">Preview</span>
                    <div>
                        <h2>What's Coming Next?</h2>
                        <span class="jp-title"><ruby>æ¬¡<rt>ã¤ã</rt></ruby>ã®ãƒ¬ãƒƒã‚¹ãƒ³</span>
                    </div>
                </div>

                <div class="explanation">
                    <h3>ğŸ”® Lesson 4 Preview</h3>
                    <p>In Lesson 4, you'll finally learn about <strong>time</strong>! You'll master telling the time, talking about schedules, and using the key time-related particles.</p>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead><tr><th>Lesson 4 Topic</th><th>What You'll Learn</th></tr></thead>
                        <tbody>
                            <tr><td><ruby>ä»Š<rt>ã„ã¾</rt></ruby> <ruby>ä½•æ™‚<rt>ãªã‚“ã˜</rt></ruby>ã§ã™ã‹</td><td>"What time is it now?"</td></tr>
                            <tr><td>ï½<ruby>æ™‚<rt>ã˜</rt></ruby> ï½<ruby>åˆ†<rt>ãµã‚“</rt></ruby></td><td>Hours and minutes</td></tr>
                            <tr><td>V ã¾ã™ / V ã¾ã›ã‚“</td><td>Verb conjugation (polite)</td></tr>
                            <tr><td>ï½ã‹ã‚‰ ï½ã¾ã§</td><td>"From ~ to ~" (time range)</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="key-point">
                    <strong>ğŸ¯ Study Tip:</strong> Before Lesson 4, make sure you're comfortable with the complete ko-so-a-do chart. The place words (ã“ã“/ãã“/ã‚ãã“/ã©ã“) will keep appearing. Also review the multiple meanings of ã® â€” it's only going to get more useful!
                </div>
            </div>
        </div>

        <!-- ======================== SLIDE 20: Summary ======================== -->
        <div class="slide" data-slide="20">
            <div class="summary-card">
                <h2>ğŸ‰ Lesson 3 Complete!</h2>
                <p>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ You've mastered place words and completed the ko-so-a-do system!</p>

                <div class="summary-points">
                    <div class="summary-point">
                        <h4>ğŸ“ ã“ã“/ãã“/ã‚ãã“</h4>
                        <p>Here, there, over there â€” the place trio</p>
                    </div>
                    <div class="summary-point">
                        <h4>ğŸ© ã“ã¡ã‚‰/ãã¡ã‚‰/ã‚ã¡ã‚‰</h4>
                        <p>Polite direction alternatives</p>
                    </div>
                    <div class="summary-point">
                        <h4>ğŸ¢ N ã¯ place ã§ã™</h4>
                        <p>State where things and people are</p>
                    </div>
                    <div class="summary-point">
                        <h4>â“ ã©ã“ / ã©ã¡ã‚‰</h4>
                        <p>Ask "where?" and about organizations</p>
                    </div>
                    <div class="summary-point">
                        <h4>ğŸ­ ã©ã“ã® N</h4>
                        <p>Ask about product origin (country/company)</p>
                    </div>
                    <div class="summary-point">
                        <h4>ğŸ“Š ã“/ã/ã‚/ã© Chart</h4>
                        <p>The complete demonstrative system!</p>
                    </div>
                </div>

                <button class="restart-btn" onclick="restartPresentation()">ğŸ”„ Start Over</button>
            </div>
        </div>

    </div>

    <script>
        // ========== Navigation ==========
        let currentSlide = 1;
        const totalSlides = 20;

        function updateSlide() {
            document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
            const active = document.querySelector(`[data-slide="${currentSlide}"]`);
            if (active) active.classList.add('active');
            document.getElementById('currentSlide').textContent = currentSlide;
            document.getElementById('totalSlides').textContent = totalSlides;
            const progress = ((currentSlide - 1) / (totalSlides - 1)) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('prevBtn').disabled = currentSlide === 1;
            document.getElementById('nextBtn').disabled = currentSlide === totalSlides;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function nextSlide() { if (currentSlide < totalSlides) { currentSlide++; updateSlide(); } }
        function prevSlide() { if (currentSlide > 1) { currentSlide--; updateSlide(); } }
        function goToSlide(n) { currentSlide = n; updateSlide(); }
        function restartPresentation() { currentSlide = 1; updateSlide(); }

        // ========== Collapsible Toggles ==========
        function toggleRef(button) {
            const content = button.nextElementSibling;
            button.classList.toggle('open');
            content.classList.toggle('open');
        }

        // ========== Multiple Choice with Instant Feedback ==========
        const mcAnswers = {
            q1: { correct: 'C', explanation: 'âœ… The restroom is far from BOTH you and your friend, so ã‚ãã“ (over there) is correct. Since you\'re sharing the same space, ã“ã“ = your shared area, and ã‚ãã“ = far away.' },
            q2: { correct: 'B', explanation: 'âœ… ã“ã¡ã‚‰ã§ã™ is much more polite and appropriate for hotel/service staff. ã“ã“ã§ã™ is understandable but too casual for professional settings.' },
            q4: { correct: 'B', explanation: 'âœ… When a person + ã¯ + place + ã§ã™, it means that person IS at that place. ç”°ä¸­ã•ã‚“ã¯ é£Ÿå ‚ã§ã™ = "Mr. Tanaka is in the cafeteria."' },
            q6: { correct: 'B', explanation: 'âœ… To ask about someone\'s company, use ã©ã¡ã‚‰ (polite) or ã©ã“ â€” NOT ãªã‚“. ä¼šç¤¾ã¯ ã©ã¡ã‚‰ã§ã™ã‹ is the natural way to ask "What company do you work for?"' },
            q7: { correct: 'C', explanation: 'âœ… æ—¥æœ¬ã® è»Š with the origin meaning of ã® = "a car made in Japan" / "a Japanese car." Nâ‚ (country) ã® Nâ‚‚ (product) indicates where the product comes from.' },
            q9: { correct: 'B', explanation: 'âœ… ã“ã“ belongs to the "Place" category. The pattern is: ã“ã‚Œ (thing) â†’ ã“ã® N (modifier) â†’ ã“ã“ (place) â†’ ã“ã¡ã‚‰ (direction/polite place). All start with ã“ = near the speaker.' },
            q11: { correct: 'B', explanation: 'âœ… ãŠå›½ adds the respectful prefix ãŠ, which shows politeness toward the listener\'s country. This is more appropriate when asking someone about their personal background.' },
            q12: { correct: 'B', explanation: 'âœ… Correct! ãŠ is used to show respect toward the listener or third party. You don\'t use ãŠ for your own things. Exception: set words like ãŠã¡ã‚ƒ, ãŠã¿ã‚„ã’ where ãŠ is just part of the word.' },
            q14: { correct: 'C', explanation: 'âœ… The question asks ã©ã“ã® (which company/where from), so answer with the company name + ã® + product: ã‚½ãƒ‹ãƒ¼ã® ã‚«ãƒ¡ãƒ©ã§ã™ = "It\'s a Sony camera."' }
        };

        function checkMC(qId, clickedOption, correctLetter) {
            const feedbackEl = document.getElementById(qId + '-feedback');
            const optionsContainer = document.getElementById(qId + '-options');
            const options = optionsContainer.querySelectorAll('.mc-option');
            const answerData = mcAnswers[qId];
            const clickedLetter = clickedOption.querySelector('.option-letter').textContent;

            options.forEach(opt => opt.classList.add('disabled'));
            options.forEach(opt => {
                const letter = opt.querySelector('.option-letter').textContent;
                if (letter === answerData.correct) opt.classList.add('correct-choice');
                else if (opt === clickedOption && clickedLetter !== answerData.correct) opt.classList.add('incorrect-choice');
            });

            const isCorrect = clickedLetter === answerData.correct;
            feedbackEl.className = 'feedback-area show ' + (isCorrect ? 'correct-feedback' : 'incorrect-feedback');
            feedbackEl.innerHTML = `<span class="fb-icon">${isCorrect ? 'ğŸ‰' : 'ğŸ˜…'}</span><span class="fb-answer">${isCorrect ? 'Correct!' : 'Not quite!'}</span><div class="fb-explain">${answerData.explanation}</div>`;
        }

        // ========== Fill-in-the-Blank ==========
        function checkFillBlank(qId, acceptedAnswers, displayAnswer, explanation) {
            const input = document.getElementById(qId + '-input');
            const feedbackEl = document.getElementById(qId + '-feedback');
            const userAnswer = input.value.trim();
            if (!userAnswer) {
                feedbackEl.className = 'feedback-area show incorrect-feedback';
                feedbackEl.innerHTML = `<span class="fb-icon">âœï¸</span> <span class="fb-answer">Please type your answer first!</span>`;
                return;
            }
            const isCorrect = acceptedAnswers.includes(userAnswer);
            input.style.borderColor = isCorrect ? 'var(--success)' : 'var(--error)';
            input.style.background = isCorrect ? 'var(--success-light)' : 'var(--error-light)';
            feedbackEl.className = 'feedback-area show ' + (isCorrect ? 'correct-feedback' : 'incorrect-feedback');
            feedbackEl.innerHTML = `<span class="fb-icon">${isCorrect ? 'ğŸ‰' : 'ğŸ˜…'}</span><span class="fb-answer">${isCorrect ? 'Correct!' : 'Not quite!'} The answer is: <strong>${displayAnswer}</strong></span><div class="fb-explain">${explanation}</div>`;
        }

        // ========== Keyboard Navigation ==========
        document.addEventListener('keydown', function(e) {
            if (e.target.tagName === 'INPUT') return;
            if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); }
            else if (e.key === 'ArrowLeft') { e.preventDefault(); prevSlide(); }
        });

        // ========== Touch/Swipe ==========
        let touchStartX = 0, touchEndX = 0;
        document.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; });
        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            const diff = touchStartX - touchEndX;
            if (Math.abs(diff) > 50) { diff > 0 ? nextSlide() : prevSlide(); }
        });

        // ========== Initialize ==========
        updateSlide();
    </script>
</body>
</html>
