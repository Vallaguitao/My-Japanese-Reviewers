<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã ã„11-15ã‹ ã‹ã‚“ã˜ã‚¯ã‚¤ã‚º - Lessons 11-15 Kanji Quiz</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&family=Zen+Maru+Gothic:wght@400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans JP', 'Zen Maru Gothic', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            padding: clamp(10px, 3vw, 20px);
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        /* Header */
        .header {
            text-align: center;
            color: white;
            margin-bottom: clamp(15px, 3vw, 30px);
        }
        
        .header h1 {
            font-size: clamp(24px, 5vw, 42px);
            margin-bottom: 10px;
            background: linear-gradient(135deg, #e94560, #ff6b6b, #feca57, #48dbfb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
        }
        
        .header p {
            font-size: clamp(14px, 2.5vw, 20px);
            opacity: 0.9;
        }
        
        .lesson-badge {
            display: inline-block;
            background: linear-gradient(135deg, #e94560 0%, #ff6b6b 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: clamp(12px, 2vw, 16px);
            font-weight: 600;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }
        
        /* Score Board */
        .score-board {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9ff 100%);
            border-radius: clamp(10px, 2vw, 15px);
            padding: clamp(12px, 2vw, 20px);
            margin-bottom: clamp(15px, 2vw, 20px);
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border-top: 5px solid;
            border-image: linear-gradient(90deg, #e94560, #ff6b6b, #feca57, #48dbfb, #ff9ff3) 1;
        }
        
        .score-item {
            text-align: center;
            min-width: 80px;
        }
        
        .score-label {
            font-size: clamp(11px, 1.5vw, 14px);
            color: #666;
            margin-bottom: 5px;
        }
        
        .score-value {
            font-size: clamp(20px, 3vw, 28px);
            font-weight: bold;
            color: #e94560;
        }
        
        .progress-bar {
            width: clamp(120px, 20vw, 200px);
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e94560, #ff6b6b);
            border-radius: 6px;
            transition: width 0.3s ease;
        }
        
        /* Cards */
        .card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9ff 100%);
            border-radius: clamp(12px, 2vw, 20px);
            padding: clamp(15px, 3vw, 30px);
            margin-bottom: clamp(15px, 2vw, 20px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #e94560, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
        }
        
        .card-title {
            font-size: clamp(16px, 2.5vw, 22px);
            color: #0f3460;
            margin-bottom: clamp(12px, 2vw, 20px);
            padding-bottom: clamp(10px, 1.5vw, 15px);
            border-bottom: 3px solid #e94560;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Start Screen */
        .start-screen {
            text-align: center;
            padding: clamp(30px, 5vw, 50px) clamp(20px, 4vw, 40px);
        }
        
        .start-icon {
            font-size: clamp(60px, 12vw, 100px);
            margin-bottom: 20px;
        }
        
        .start-title {
            font-size: clamp(24px, 4vw, 36px);
            color: #0f3460;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .start-subtitle {
            font-size: clamp(14px, 2vw, 18px);
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: clamp(10px, 2vw, 15px);
            margin-bottom: 25px;
        }
        
        .info-box {
            background: linear-gradient(135deg, #ffe8ec 0%, #ffd4dc 100%);
            padding: clamp(12px, 2vw, 18px);
            border-radius: 12px;
            border-left: 4px solid #e94560;
        }
        
        .info-box .emoji {
            font-size: clamp(24px, 4vw, 32px);
            margin-bottom: 8px;
        }
        
        .info-box .label {
            font-size: clamp(11px, 1.5vw, 13px);
            color: #666;
            margin-bottom: 4px;
        }
        
        .info-box .value {
            font-size: clamp(14px, 2vw, 18px);
            color: #0f3460;
            font-weight: 700;
        }
        
        .start-btn {
            background: linear-gradient(135deg, #e94560 0%, #ff6b6b 100%);
            color: white;
            border: none;
            padding: clamp(15px, 3vw, 20px) clamp(40px, 8vw, 60px);
            font-size: clamp(18px, 3vw, 24px);
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(233, 69, 96, 0.4);
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
        }
        
        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(233, 69, 96, 0.5);
        }
        
        /* Question Box */
        .question-box {
            background: linear-gradient(135deg, #ffe8ec 0%, #ffd4dc 100%);
            border-radius: clamp(12px, 2vw, 18px);
            padding: clamp(20px, 4vw, 35px);
            margin-bottom: clamp(15px, 2vw, 20px);
            text-align: center;
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .question-number {
            font-size: clamp(12px, 1.5vw, 14px);
            color: #e94560;
            font-weight: bold;
            background: linear-gradient(135deg, #ffd4dc, #ffc0cb);
            padding: 5px 15px;
            border-radius: 20px;
        }
        
        .lesson-indicator {
            font-size: clamp(10px, 1.3vw, 12px);
            padding: 5px 12px;
            border-radius: 15px;
            color: white;
            font-weight: 600;
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .question-type {
            font-size: clamp(10px, 1.3vw, 12px);
            padding: 5px 12px;
            border-radius: 15px;
            color: white;
            font-weight: 600;
        }
        
        .question-type.meaning { background: linear-gradient(135deg, #e94560, #ff6b6b); }
        .question-type.reading { background: linear-gradient(135deg, #feca57, #ff9f43); color: #333; }
        .question-type.kanji { background: linear-gradient(135deg, #48dbfb, #0abde3); }
        
        .kanji-prompt {
            font-size: clamp(48px, 12vw, 100px);
            color: #0f3460;
            font-weight: 700;
            margin: clamp(15px, 3vw, 25px) 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .meaning-prompt {
            font-size: clamp(20px, 4vw, 32px);
            color: #0f3460;
            font-weight: 600;
            margin: clamp(15px, 3vw, 25px) 0;
        }
        
        .reading-prompt {
            font-size: clamp(28px, 6vw, 48px);
            color: #e94560;
            font-weight: 600;
            margin: clamp(15px, 3vw, 25px) 0;
        }
        
        .question-instruction {
            font-size: clamp(13px, 1.8vw, 16px);
            color: #666;
            margin-bottom: 10px;
        }
        
        /* Answer Options */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: clamp(10px, 2vw, 15px);
            margin-top: clamp(15px, 2vw, 20px);
        }
        
        .option-btn {
            padding: clamp(15px, 3vw, 25px);
            font-size: clamp(16px, 2.5vw, 22px);
            border: 3px solid #e0e0e0;
            border-radius: clamp(12px, 2vw, 18px);
            cursor: pointer;
            background: white;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
            font-weight: 500;
        }
        
        .option-btn:hover:not(.selected):not(.correct):not(.incorrect) {
            border-color: #e94560;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(233, 69, 96, 0.2);
        }
        
        .option-btn.selected {
            border-color: #ff6b6b;
            background: linear-gradient(135deg, #ffe8ec, #ffd4dc);
        }
        
        .option-btn.correct {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
        }
        
        .option-btn.correct::after {
            content: ' âœ“';
            color: #28a745;
        }
        
        .option-btn.incorrect {
            border-color: #dc3545;
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
        }
        
        .option-btn.incorrect::after {
            content: ' âœ—';
            color: #dc3545;
        }
        
        /* Feedback */
        .feedback {
            margin-top: clamp(15px, 2vw, 20px);
            padding: clamp(12px, 2vw, 18px);
            border-radius: 12px;
            font-size: clamp(14px, 2vw, 18px);
            display: none;
        }
        
        .feedback.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .feedback.correct {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border-left: 4px solid #28a745;
            color: #155724;
        }
        
        .feedback.incorrect {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            border-left: 4px solid #dc3545;
            color: #721c24;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Navigation */
        .navigation {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: clamp(15px, 3vw, 25px);
        }
        
        .nav-btn {
            padding: clamp(12px, 2vw, 16px) clamp(25px, 4vw, 45px);
            font-size: clamp(15px, 2vw, 18px);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
        }
        
        .nav-btn.prev {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .nav-btn.next {
            background: linear-gradient(135deg, #e94560 0%, #ff6b6b 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }
        
        .nav-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* Results Screen */
        .results-screen {
            text-align: center;
            padding: clamp(30px, 5vw, 50px);
        }
        
        .result-icon {
            font-size: clamp(70px, 15vw, 120px);
            margin-bottom: 20px;
        }
        
        .result-title {
            font-size: clamp(28px, 5vw, 42px);
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .result-title.pass {
            color: #28a745;
        }
        
        .result-title.fail {
            color: #e94560;
        }
        
        .result-score {
            font-size: clamp(48px, 10vw, 80px);
            font-weight: 700;
            margin: 20px 0;
        }
        
        .result-score.pass {
            background: linear-gradient(135deg, #28a745, #20c997);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .result-score.fail {
            background: linear-gradient(135deg, #e94560, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .result-message {
            font-size: clamp(14px, 2vw, 18px);
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .result-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: clamp(10px, 2vw, 15px);
            margin: 25px 0;
        }
        
        .breakdown-item {
            background: linear-gradient(135deg, #ffe8ec, #ffd4dc);
            padding: clamp(12px, 2vw, 18px);
            border-radius: 12px;
        }
        
        .breakdown-label {
            font-size: clamp(11px, 1.5vw, 13px);
            color: #666;
            margin-bottom: 5px;
        }
        
        .breakdown-value {
            font-size: clamp(20px, 3vw, 28px);
            font-weight: 700;
            color: #0f3460;
        }
        
        .retry-btn {
            background: linear-gradient(135deg, #e94560 0%, #ff6b6b 100%);
            color: white;
            border: none;
            padding: clamp(15px, 3vw, 20px) clamp(40px, 8vw, 60px);
            font-size: clamp(18px, 3vw, 24px);
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(233, 69, 96, 0.4);
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
            margin-top: 20px;
        }
        
        .retry-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(233, 69, 96, 0.5);
        }
        
        /* Notes Section */
        .notes-card {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeeba 100%);
            border-radius: clamp(12px, 2vw, 18px);
            padding: clamp(15px, 3vw, 25px);
            margin-top: clamp(15px, 2vw, 20px);
            border-left: 5px solid #ffc107;
        }
        
        .notes-title {
            font-size: clamp(16px, 2.5vw, 20px);
            color: #856404;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
        }
        
        .notes-content {
            font-size: clamp(13px, 1.8vw, 16px);
            color: #856404;
            line-height: 1.7;
        }
        
        .notes-content ul {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        .notes-content li {
            margin-bottom: 8px;
        }
        
        .kanji-example {
            display: inline-block;
            background: white;
            padding: 3px 10px;
            border-radius: 6px;
            font-weight: 600;
            color: #0f3460;
            margin: 0 3px;
        }
        
        /* Reference Toggle */
        .reference-toggle {
            text-align: center;
            margin-top: clamp(15px, 2vw, 20px);
        }
        
        .reference-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: clamp(10px, 2vw, 14px) clamp(20px, 4vw, 30px);
            font-size: clamp(14px, 2vw, 16px);
            font-weight: 600;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
        }
        
        .reference-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .reference-card {
            display: none;
            background: linear-gradient(145deg, #ffffff 0%, #f8f9ff 100%);
            border-radius: clamp(12px, 2vw, 18px);
            padding: clamp(15px, 3vw, 25px);
            margin-top: clamp(15px, 2vw, 20px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .reference-card.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .ref-section {
            margin-bottom: clamp(15px, 2vw, 20px);
        }
        
        .ref-section-title {
            font-size: clamp(14px, 2vw, 18px);
            color: #e94560;
            font-weight: 700;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e94560;
        }
        
        .ref-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(clamp(90px, 12vw, 120px), 1fr));
            gap: clamp(6px, 1vw, 10px);
        }
        
        .ref-item {
            background: linear-gradient(135deg, #ffe8ec, #ffd4dc);
            padding: clamp(8px, 1.2vw, 12px);
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .ref-item:hover {
            border-color: #e94560;
            transform: translateY(-2px);
        }
        
        .ref-kanji {
            font-size: clamp(16px, 2.2vw, 22px);
            color: #0f3460;
            font-weight: 700;
            margin-bottom: 3px;
        }
        
        .ref-reading {
            font-size: clamp(9px, 1.2vw, 11px);
            color: #e94560;
            margin-bottom: 2px;
        }
        
        .ref-meaning {
            font-size: clamp(8px, 1vw, 10px);
            color: #666;
        }
        
        /* Lesson tabs in reference */
        .lesson-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
            justify-content: center;
        }
        
        .lesson-tab {
            padding: 8px 16px;
            border: 2px solid #e94560;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
            font-size: clamp(12px, 1.5vw, 14px);
        }
        
        .lesson-tab:hover, .lesson-tab.active {
            background: linear-gradient(135deg, #e94560, #ff6b6b);
            color: white;
        }
        
        /* Mobile Responsive */
        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                flex-wrap: wrap;
            }
            
            .nav-btn {
                flex: 1;
                min-width: 45%;
            }
            
            .info-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .question-header {
                justify-content: center;
            }
        }
        
        /* Large Desktop (1920x1080) */
        @media (min-width: 1400px) {
            .container {
                max-width: 1200px;
            }
            
            .card {
                padding: 40px;
            }
        }
        
        /* Hide sections */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="lesson-badge">ã ã„ 11-15 ã‹</div>
            <h1>ğŸ“ ã‹ã‚“ã˜ã‚¯ã‚¤ã‚º</h1>
            <p>Lessons 11-15 Comprehensive Kanji Quiz</p>
        </div>
        
        <!-- Score Board -->
        <div class="score-board" id="scoreBoard">
            <div class="score-item">
                <div class="score-label">ã‚‚ã‚“ã ã„</div>
                <div class="score-value"><span id="currentQ">0</span>/40</div>
            </div>
            <div class="score-item">
                <div class="score-label">ã›ã„ã‹ã„</div>
                <div class="score-value" id="correctCount">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">ã—ã‚“ã¡ã‚‡ã</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <!-- Start Screen -->
        <div class="card" id="startScreen">
            <div class="start-screen">
                <div class="start-icon">ğŸ¯</div>
                <h2 class="start-title">ã‹ã‚“ã˜ ãã†ã”ã† ã‚Œã‚“ã—ã‚…ã†</h2>
                <p class="start-subtitle">
                    ã ã„11ã‹ã‹ã‚‰ ã ã„15ã‹ã¾ã§ã® ã‹ã‚“ã˜ã‚’ ã¾ãªã³ã¾ã—ã‚‡ã†ï¼<br>
                    Comprehensive kanji practice from Lessons 11-15!
                </p>
                
                <div class="info-grid">
                    <div class="info-box">
                        <div class="emoji">ğŸ“Š</div>
                        <div class="label">ã‚‚ã‚“ã ã„ã™ã†</div>
                        <div class="value">40 ã‚‚ã‚“</div>
                    </div>
                    <div class="info-box">
                        <div class="emoji">ğŸ¯</div>
                        <div class="label">ã”ã†ã‹ãã¦ã‚“</div>
                        <div class="value">80%</div>
                    </div>
                    <div class="info-box">
                        <div class="emoji">ğŸ”€</div>
                        <div class="label">ã‚‚ã‚“ã ã„</div>
                        <div class="value">ãƒ©ãƒ³ãƒ€ãƒ </div>
                    </div>
                    <div class="info-box">
                        <div class="emoji">ğŸ“–</div>
                        <div class="label">ãƒ¬ãƒƒã‚¹ãƒ³</div>
                        <div class="value">11-15</div>
                    </div>
                    <div class="info-box">
                        <div class="emoji">ğŸ”¤</div>
                        <div class="label">ã—ã‚…ã‚‹ã„</div>
                        <div class="value">3 ã‚¿ã‚¤ãƒ—</div>
                    </div>
                </div>
                
                <button class="start-btn" onclick="startQuiz()">
                    ã¯ã˜ã‚ã‚‹ ğŸš€
                </button>
            </div>
        </div>
        
        <!-- Question Screen -->
        <div class="card hidden" id="questionScreen">
            <div class="card-title">
                <span id="questionTypeIcon">ğŸ“–</span>
                <span id="questionTypeLabel">ã„ã¿ â†’ ã‹ã‚“ã˜</span>
            </div>
            
            <div class="question-box">
                <div class="question-header">
                    <span class="question-number" id="questionNumber">ã‚‚ã‚“ã ã„ 1</span>
                    <span class="lesson-indicator" id="lessonIndicator">L11</span>
                    <span class="question-type meaning" id="questionTypeBadge">ã„ã¿</span>
                </div>
                
                <div class="question-instruction" id="questionInstruction">
                    ã¤ãã® ã„ã¿ã® ã‹ã‚“ã˜ã‚’ ãˆã‚‰ã‚“ã§ãã ã•ã„
                </div>
                
                <div class="kanji-prompt hidden" id="kanjiPrompt">æ¼¢å­—</div>
                <div class="meaning-prompt hidden" id="meaningPrompt">meaning</div>
                <div class="reading-prompt hidden" id="readingPrompt">ã‚ˆã¿ã‹ãŸ</div>
                
                <div class="options-grid" id="optionsGrid">
                    <!-- Options will be generated by JavaScript -->
                </div>
            </div>
            
            <div class="feedback" id="feedback">
                <span id="feedbackText"></span>
            </div>
            
            <div class="navigation">
                <button class="nav-btn prev" onclick="prevQuestion()" id="prevBtn" disabled>ã¾ãˆ</button>
                <button class="nav-btn next" onclick="nextQuestion()" id="nextBtn" disabled>ã¤ã</button>
            </div>
        </div>
        
        <!-- Results Screen -->
        <div class="card hidden" id="resultsScreen">
            <div class="results-screen">
                <div class="result-icon" id="resultIcon">ğŸ‰</div>
                <h2 class="result-title pass" id="resultTitle">ã”ã†ã‹ãï¼</h2>
                <div class="result-score pass" id="resultScore">100%</div>
                <p class="result-message" id="resultMessage">
                    ã™ã°ã‚‰ã—ã„ï¼ ã‹ã‚“ã˜ã‚’ ã‚ˆã ãŠã¼ãˆã¦ã„ã¾ã™ã­ï¼
                </p>
                
                <div class="result-breakdown">
                    <div class="breakdown-item">
                        <div class="breakdown-label">ã›ã„ã‹ã„</div>
                        <div class="breakdown-value" id="finalCorrect">40</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label">ãµã›ã„ã‹ã„</div>
                        <div class="breakdown-value" id="finalIncorrect">0</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label">ã›ã„ã‹ã„ã‚Šã¤</div>
                        <div class="breakdown-value" id="finalPercent">100%</div>
                    </div>
                </div>
                
                <button class="retry-btn" onclick="retryQuiz()">
                    ã‚‚ã† ã„ã¡ã© ğŸ”„
                </button>
            </div>
        </div>
        
        <!-- Notes Section -->
        <div class="notes-card">
            <div class="notes-title">ğŸ“ ã¹ã‚“ãã‚‡ã†ã® ãƒã‚¤ãƒ³ãƒˆ</div>
            <div class="notes-content">
                <strong>ã ã„11-15ã‹ã® ã‹ã‚“ã˜ ã«ã¤ã„ã¦ï¼š</strong>
                <ul>
                    <li>ğŸ”¢ <strong>L11:</strong> <span class="kanji-example">ä¸€äºº</span>ã€<span class="kanji-example">ä¸€å°</span>ã€<span class="kanji-example">ä¸€æš</span> - Counters & family terms</li>
                    <li>ğŸŒ¸ <strong>L12:</strong> <span class="kanji-example">æ˜¥</span>ã€<span class="kanji-example">å¤</span>ã€<span class="kanji-example">ç§‹</span>ã€<span class="kanji-example">å†¬</span> - Seasons, weather & adjectives</li>
                    <li>ğŸ›ï¸ <strong>L13:</strong> <span class="kanji-example">åšç‰©é¤¨</span>ã€<span class="kanji-example">ç¾è¡“é¤¨</span>ã€<span class="kanji-example">ç¥ç¤¾</span> - Places & leisure activities</li>
                    <li>ğŸš‰ <strong>L14:</strong> <span class="kanji-example">å‡ºå£</span>ã€<span class="kanji-example">å…¥å£</span>ã€<span class="kanji-example">æ”¹æœ­å£</span> - Station vocabulary & verbs</li>
                    <li>ğŸ‘¨â€âš•ï¸ <strong>L15:</strong> <span class="kanji-example">åŒ»è€…</span>ã€<span class="kanji-example">å¼è­·å£«</span>ã€<span class="kanji-example">ç ”ç©¶è€…</span> - Occupations & verbs</li>
                </ul>
                <p style="margin-top: 15px;">
                    ğŸ’¡ <strong>ãƒ’ãƒ³ãƒˆï¼š</strong> ã˜ã‚‡ã™ã†ã—ï¼ˆcountersï¼‰ã¯ ã‚‚ã®ã«ã‚ˆã£ã¦ ã¡ãŒã„ã¾ã™ï¼<br>
                    <em>Tip: Japanese has different counters for different types of objects!</em>
                </p>
            </div>
        </div>
        
        <!-- Reference Toggle -->
        <div class="reference-toggle">
            <button class="reference-btn" onclick="toggleReference()">ğŸ“– ã‹ã‚“ã˜ãƒªã‚¹ãƒˆã‚’ ã¿ã‚‹</button>
        </div>
        
        <!-- Reference Card -->
        <div class="reference-card" id="referenceCard">
            <!-- Lesson Tabs -->
            <div class="lesson-tabs">
                <button class="lesson-tab active" onclick="showLesson(11)">L11</button>
                <button class="lesson-tab" onclick="showLesson(12)">L12</button>
                <button class="lesson-tab" onclick="showLesson(13)">L13</button>
                <button class="lesson-tab" onclick="showLesson(14)">L14</button>
                <button class="lesson-tab" onclick="showLesson(15)">L15</button>
                <button class="lesson-tab" onclick="showLesson(0)">All</button>
            </div>
            
            <!-- Lesson 11 Reference -->
            <div class="lesson-content" id="lesson11Content">
                <div class="ref-section">
                    <div class="ref-section-title">ğŸ”¢ L11: ã˜ã‚‡ã™ã†ã—ãƒ»ã‹ãã (Counters & Family)</div>
                    <div class="ref-grid">
                        <div class="ref-item"><div class="ref-kanji">ä¸€äºº</div><div class="ref-reading">ã²ã¨ã‚Š</div><div class="ref-meaning">1 person</div></div>
                        <div class="ref-item"><div class="ref-kanji">äºŒäºº</div><div class="ref-reading">ãµãŸã‚Š</div><div class="ref-meaning">2 people</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä¸€å°</div><div class="ref-reading">ã„ã¡ã ã„</div><div class="ref-meaning">1 machine</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä¸€æš</div><div class="ref-reading">ã„ã¡ã¾ã„</div><div class="ref-meaning">1 flat item</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä¸€å›</div><div class="ref-reading">ã„ã£ã‹ã„</div><div class="ref-meaning">1 time</div></div>
                        <div class="ref-item"><div class="ref-kanji">åˆ‡æ‰‹</div><div class="ref-reading">ãã£ã¦</div><div class="ref-meaning">stamp</div></div>
                        <div class="ref-item"><div class="ref-kanji">å°ç­’</div><div class="ref-reading">ãµã†ã¨ã†</div><div class="ref-meaning">envelope</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä¸¡è¦ª</div><div class="ref-reading">ã‚Šã‚‡ã†ã—ã‚“</div><div class="ref-meaning">parents</div></div>
                        <div class="ref-item"><div class="ref-kanji">å…„å¼Ÿ</div><div class="ref-reading">ãã‚‡ã†ã ã„</div><div class="ref-meaning">siblings</div></div>
                        <div class="ref-item"><div class="ref-kanji">å…„</div><div class="ref-reading">ã‚ã«</div><div class="ref-meaning">elder brother</div></div>
                        <div class="ref-item"><div class="ref-kanji">å§‰</div><div class="ref-reading">ã‚ã­</div><div class="ref-meaning">elder sister</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¼Ÿ</div><div class="ref-reading">ãŠã¨ã†ã¨</div><div class="ref-meaning">younger brother</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¦¹</div><div class="ref-reading">ã„ã‚‚ã†ã¨</div><div class="ref-meaning">younger sister</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¤–å›½</div><div class="ref-reading">ãŒã„ã“ã</div><div class="ref-meaning">foreign country</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç•™å­¦ç”Ÿ</div><div class="ref-reading">ã‚Šã‚…ã†ãŒãã›ã„</div><div class="ref-meaning">exchange student</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä¸€æ™‚é–“</div><div class="ref-reading">ã„ã¡ã˜ã‹ã‚“</div><div class="ref-meaning">1 hour</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä¸€é€±é–“</div><div class="ref-reading">ã„ã£ã—ã‚…ã†ã‹ã‚“</div><div class="ref-meaning">1 week</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä¸€ã‹æœˆ</div><div class="ref-reading">ã„ã£ã‹ã’ã¤</div><div class="ref-meaning">1 month</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä¸€å¹´</div><div class="ref-reading">ã„ã¡ã­ã‚“</div><div class="ref-meaning">1 year</div></div>
                        <div class="ref-item"><div class="ref-kanji">å…¨éƒ¨</div><div class="ref-reading">ãœã‚“ã¶</div><div class="ref-meaning">all, total</div></div>
                    </div>
                </div>
            </div>
            
            <!-- Lesson 12 Reference -->
            <div class="lesson-content hidden" id="lesson12Content">
                <div class="ref-section">
                    <div class="ref-section-title">ğŸŒ¸ L12: ãã›ã¤ãƒ»ã¦ã‚“ããƒ»ã‘ã„ã‚ˆã†ã— (Seasons, Weather & Adjectives)</div>
                    <div class="ref-grid">
                        <div class="ref-item"><div class="ref-kanji">ç°¡å˜</div><div class="ref-reading">ã‹ã‚“ãŸã‚“</div><div class="ref-meaning">easy, simple</div></div>
                        <div class="ref-item"><div class="ref-kanji">è¿‘ã„</div><div class="ref-reading">ã¡ã‹ã„</div><div class="ref-meaning">near</div></div>
                        <div class="ref-item"><div class="ref-kanji">é ã„</div><div class="ref-reading">ã¨ãŠã„</div><div class="ref-meaning">far</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ—©ã„</div><div class="ref-reading">ã¯ã‚„ã„</div><div class="ref-meaning">early, fast</div></div>
                        <div class="ref-item"><div class="ref-kanji">é…ã„</div><div class="ref-reading">ãŠãã„</div><div class="ref-meaning">slow, late</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¤šã„</div><div class="ref-reading">ãŠãŠã„</div><div class="ref-meaning">many</div></div>
                        <div class="ref-item"><div class="ref-kanji">å°‘ãªã„</div><div class="ref-reading">ã™ããªã„</div><div class="ref-meaning">few</div></div>
                        <div class="ref-item"><div class="ref-kanji">æš–ã‹ã„</div><div class="ref-reading">ã‚ãŸãŸã‹ã„</div><div class="ref-meaning">warm</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ¶¼ã—ã„</div><div class="ref-reading">ã™ãšã—ã„</div><div class="ref-meaning">cool</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç”˜ã„</div><div class="ref-reading">ã‚ã¾ã„</div><div class="ref-meaning">sweet</div></div>
                        <div class="ref-item"><div class="ref-kanji">è¾›ã„</div><div class="ref-reading">ã‹ã‚‰ã„</div><div class="ref-meaning">spicy</div></div>
                        <div class="ref-item"><div class="ref-kanji">é‡ã„</div><div class="ref-reading">ãŠã‚‚ã„</div><div class="ref-meaning">heavy</div></div>
                        <div class="ref-item"><div class="ref-kanji">è»½ã„</div><div class="ref-reading">ã‹ã‚‹ã„</div><div class="ref-meaning">light</div></div>
                        <div class="ref-item"><div class="ref-kanji">å­£ç¯€</div><div class="ref-reading">ãã›ã¤</div><div class="ref-meaning">season</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ˜¥</div><div class="ref-reading">ã¯ã‚‹</div><div class="ref-meaning">spring</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¤</div><div class="ref-reading">ãªã¤</div><div class="ref-meaning">summer</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç§‹</div><div class="ref-reading">ã‚ã</div><div class="ref-meaning">autumn</div></div>
                        <div class="ref-item"><div class="ref-kanji">å†¬</div><div class="ref-reading">ãµã‚†</div><div class="ref-meaning">winter</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¤©æ°—</div><div class="ref-reading">ã¦ã‚“ã</div><div class="ref-meaning">weather</div></div>
                        <div class="ref-item"><div class="ref-kanji">é›¨</div><div class="ref-reading">ã‚ã‚</div><div class="ref-meaning">rain</div></div>
                        <div class="ref-item"><div class="ref-kanji">é›ª</div><div class="ref-reading">ã‚†ã</div><div class="ref-meaning">snow</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç©ºæ¸¯</div><div class="ref-reading">ãã†ã“ã†</div><div class="ref-meaning">airport</div></div>
                        <div class="ref-item"><div class="ref-kanji">æµ·</div><div class="ref-reading">ã†ã¿</div><div class="ref-meaning">sea</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä¸–ç•Œ</div><div class="ref-reading">ã›ã‹ã„</div><div class="ref-meaning">world</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç¥­ã‚Š</div><div class="ref-reading">ã¾ã¤ã‚Š</div><div class="ref-meaning">festival</div></div>
                    </div>
                </div>
            </div>
            
            <!-- Lesson 13 Reference -->
            <div class="lesson-content hidden" id="lesson13Content">
                <div class="ref-section">
                    <div class="ref-section-title">ğŸ›ï¸ L13: ã°ã—ã‚‡ãƒ»ãƒ¬ã‚¸ãƒ£ãƒ¼ (Places & Leisure)</div>
                    <div class="ref-grid">
                        <div class="ref-item"><div class="ref-kanji">éŠã³ã¾ã™</div><div class="ref-reading">ã‚ãã³ã¾ã™</div><div class="ref-meaning">play</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ³³ãã¾ã™</div><div class="ref-reading">ãŠã‚ˆãã¾ã™</div><div class="ref-meaning">swim</div></div>
                        <div class="ref-item"><div class="ref-kanji">è¿ãˆã¾ã™</div><div class="ref-reading">ã‚€ã‹ãˆã¾ã™</div><div class="ref-meaning">welcome</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç–²ã‚Œã¾ã™</div><div class="ref-reading">ã¤ã‹ã‚Œã¾ã™</div><div class="ref-meaning">get tired</div></div>
                        <div class="ref-item"><div class="ref-kanji">çµå©šã—ã¾ã™</div><div class="ref-reading">ã‘ã£ã“ã‚“ã—ã¾ã™</div><div class="ref-meaning">marry</div></div>
                        <div class="ref-item"><div class="ref-kanji">è²·ã„ç‰©ã—ã¾ã™</div><div class="ref-reading">ã‹ã„ã‚‚ã®ã—ã¾ã™</div><div class="ref-meaning">shopping</div></div>
                        <div class="ref-item"><div class="ref-kanji">é£Ÿäº‹ã—ã¾ã™</div><div class="ref-reading">ã—ã‚‡ãã˜ã—ã¾ã™</div><div class="ref-meaning">have a meal</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ•£æ­©ã—ã¾ã™</div><div class="ref-reading">ã•ã‚“ã½ã—ã¾ã™</div><div class="ref-meaning">take a walk</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¤§å¤‰</div><div class="ref-reading">ãŸã„ã¸ã‚“</div><div class="ref-meaning">hard, tough</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ¬²ã—ã„</div><div class="ref-reading">ã»ã—ã„</div><div class="ref-meaning">want</div></div>
                        <div class="ref-item"><div class="ref-kanji">åºƒã„</div><div class="ref-reading">ã²ã‚ã„</div><div class="ref-meaning">wide</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç‹­ã„</div><div class="ref-reading">ã›ã¾ã„</div><div class="ref-meaning">narrow</div></div>
                        <div class="ref-item"><div class="ref-kanji">å·</div><div class="ref-reading">ã‹ã‚</div><div class="ref-meaning">river</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç¾è¡“</div><div class="ref-reading">ã³ã˜ã‚…ã¤</div><div class="ref-meaning">fine arts</div></div>
                        <div class="ref-item"><div class="ref-kanji">é‡£ã‚Š</div><div class="ref-reading">ã¤ã‚Š</div><div class="ref-meaning">fishing</div></div>
                        <div class="ref-item"><div class="ref-kanji">é€±æœ«</div><div class="ref-reading">ã—ã‚…ã†ã¾ã¤</div><div class="ref-meaning">weekend</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ­£æœˆ</div><div class="ref-reading">ã—ã‚‡ã†ãŒã¤</div><div class="ref-meaning">New Year</div></div>
                        <div class="ref-item"><div class="ref-kanji">åšç‰©é¤¨</div><div class="ref-reading">ã¯ãã¶ã¤ã‹ã‚“</div><div class="ref-meaning">museum</div></div>
                        <div class="ref-item"><div class="ref-kanji">å‹•ç‰©åœ’</div><div class="ref-reading">ã©ã†ã¶ã¤ãˆã‚“</div><div class="ref-meaning">zoo</div></div>
                        <div class="ref-item"><div class="ref-kanji">éŠåœ’åœ°</div><div class="ref-reading">ã‚†ã†ãˆã‚“ã¡</div><div class="ref-meaning">amusement park</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç¥ç¤¾</div><div class="ref-reading">ã˜ã‚“ã˜ã‚ƒ</div><div class="ref-meaning">shrine</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ•™ä¼š</div><div class="ref-reading">ãã‚‡ã†ã‹ã„</div><div class="ref-meaning">church</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä½“è‚²é¤¨</div><div class="ref-reading">ãŸã„ã„ãã‹ã‚“</div><div class="ref-meaning">gymnasium</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¤§ä½¿é¤¨</div><div class="ref-reading">ãŸã„ã—ã‹ã‚“</div><div class="ref-meaning">embassy</div></div>
                    </div>
                </div>
            </div>
            
            <!-- Lesson 14 Reference -->
            <div class="lesson-content hidden" id="lesson14Content">
                <div class="ref-section">
                    <div class="ref-section-title">ğŸš‰ L14: ãˆããƒ»ã©ã†ã— (Station & Verbs)</div>
                    <div class="ref-grid">
                        <div class="ref-item"><div class="ref-kanji">æ¶ˆã—ã¾ã™</div><div class="ref-reading">ã‘ã—ã¾ã™</div><div class="ref-meaning">turn off</div></div>
                        <div class="ref-item"><div class="ref-kanji">é–‹ã‘ã¾ã™</div><div class="ref-reading">ã‚ã‘ã¾ã™</div><div class="ref-meaning">open</div></div>
                        <div class="ref-item"><div class="ref-kanji">é–‰ã‚ã¾ã™</div><div class="ref-reading">ã—ã‚ã¾ã™</div><div class="ref-meaning">close</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ€¥ãã¾ã™</div><div class="ref-reading">ã„ããã¾ã™</div><div class="ref-meaning">hurry</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¾…ã¡ã¾ã™</div><div class="ref-reading">ã¾ã¡ã¾ã™</div><div class="ref-meaning">wait</div></div>
                        <div class="ref-item"><div class="ref-kanji">æŒã¡ã¾ã™</div><div class="ref-reading">ã‚‚ã¡ã¾ã™</div><div class="ref-meaning">hold</div></div>
                        <div class="ref-item"><div class="ref-kanji">å–ã‚Šã¾ã™</div><div class="ref-reading">ã¨ã‚Šã¾ã™</div><div class="ref-meaning">take</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ‰‹ä¼ã„ã¾ã™</div><div class="ref-reading">ã¦ã¤ã ã„ã¾ã™</div><div class="ref-meaning">help</div></div>
                        <div class="ref-item"><div class="ref-kanji">å‘¼ã³ã¾ã™</div><div class="ref-reading">ã‚ˆã³ã¾ã™</div><div class="ref-meaning">call</div></div>
                        <div class="ref-item"><div class="ref-kanji">è©±ã—ã¾ã™</div><div class="ref-reading">ã¯ãªã—ã¾ã™</div><div class="ref-meaning">speak</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä½¿ã„ã¾ã™</div><div class="ref-reading">ã¤ã‹ã„ã¾ã™</div><div class="ref-meaning">use</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ­¢ã‚ã¾ã™</div><div class="ref-reading">ã¨ã‚ã¾ã™</div><div class="ref-meaning">stop</div></div>
                        <div class="ref-item"><div class="ref-kanji">åº§ã‚Šã¾ã™</div><div class="ref-reading">ã™ã‚ã‚Šã¾ã™</div><div class="ref-meaning">sit</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç«‹ã¡ã¾ã™</div><div class="ref-reading">ãŸã¡ã¾ã™</div><div class="ref-meaning">stand</div></div>
                        <div class="ref-item"><div class="ref-kanji">å…¥ã‚Šã¾ã™</div><div class="ref-reading">ã¯ã„ã‚Šã¾ã™</div><div class="ref-meaning">enter</div></div>
                        <div class="ref-item"><div class="ref-kanji">å‡ºã¾ã™</div><div class="ref-reading">ã§ã¾ã™</div><div class="ref-meaning">exit</div></div>
                        <div class="ref-item"><div class="ref-kanji">é›»æ°—</div><div class="ref-reading">ã§ã‚“ã</div><div class="ref-meaning">electricity</div></div>
                        <div class="ref-item"><div class="ref-kanji">åå‰</div><div class="ref-reading">ãªã¾ãˆ</div><div class="ref-meaning">name</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä½æ‰€</div><div class="ref-reading">ã˜ã‚…ã†ã—ã‚‡</div><div class="ref-meaning">address</div></div>
                        <div class="ref-item"><div class="ref-kanji">åœ°å›³</div><div class="ref-reading">ã¡ãš</div><div class="ref-meaning">map</div></div>
                        <div class="ref-item"><div class="ref-kanji">å‡ºå£</div><div class="ref-reading">ã§ãã¡</div><div class="ref-meaning">exit</div></div>
                        <div class="ref-item"><div class="ref-kanji">å…¥å£</div><div class="ref-reading">ã„ã‚Šãã¡</div><div class="ref-meaning">entrance</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ”¹æœ­å£</div><div class="ref-reading">ã‹ã„ã•ã¤ãã¡</div><div class="ref-meaning">ticket gate</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç‰¹æ€¥</div><div class="ref-reading">ã¨ã£ãã‚…ã†</div><div class="ref-meaning">express</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ™®é€š</div><div class="ref-reading">ãµã¤ã†</div><div class="ref-meaning">local train</div></div>
                    </div>
                </div>
            </div>
            
            <!-- Lesson 15 Reference -->
            <div class="lesson-content hidden" id="lesson15Content">
                <div class="ref-section">
                    <div class="ref-section-title">ğŸ‘¨â€âš•ï¸ L15: ã—ã‚‡ããã‚‡ã†ãƒ»ã©ã†ã— (Occupations & Verbs)</div>
                    <div class="ref-grid">
                        <div class="ref-item"><div class="ref-kanji">ç½®ãã¾ã™</div><div class="ref-reading">ãŠãã¾ã™</div><div class="ref-meaning">put</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä½œã‚Šã¾ã™</div><div class="ref-reading">ã¤ãã‚Šã¾ã™</div><div class="ref-meaning">make</div></div>
                        <div class="ref-item"><div class="ref-kanji">å£²ã‚Šã¾ã™</div><div class="ref-reading">ã†ã‚Šã¾ã™</div><div class="ref-meaning">sell</div></div>
                        <div class="ref-item"><div class="ref-kanji">çŸ¥ã‚Šã¾ã™</div><div class="ref-reading">ã—ã‚Šã¾ã™</div><div class="ref-meaning">know</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä½ã¿ã¾ã™</div><div class="ref-reading">ã™ã¿ã¾ã™</div><div class="ref-meaning">live</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç ”ç©¶ã—ã¾ã™</div><div class="ref-reading">ã‘ã‚“ãã‚…ã†ã—ã¾ã™</div><div class="ref-meaning">research</div></div>
                        <div class="ref-item"><div class="ref-kanji">è³‡æ–™</div><div class="ref-reading">ã—ã‚Šã‚‡ã†</div><div class="ref-meaning">materials</div></div>
                        <div class="ref-item"><div class="ref-kanji">æœ</div><div class="ref-reading">ãµã</div><div class="ref-meaning">clothes</div></div>
                        <div class="ref-item"><div class="ref-kanji">è£½å“</div><div class="ref-reading">ã›ã„ã²ã‚“</div><div class="ref-meaning">products</div></div>
                        <div class="ref-item"><div class="ref-kanji">çµŒæ¸ˆ</div><div class="ref-reading">ã‘ã„ã–ã„</div><div class="ref-meaning">economy</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¸‚å½¹æ‰€</div><div class="ref-reading">ã—ã‚„ãã—ã‚‡</div><div class="ref-meaning">city hall</div></div>
                        <div class="ref-item"><div class="ref-kanji">é«˜æ ¡</div><div class="ref-reading">ã“ã†ã“ã†</div><div class="ref-meaning">high school</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ­¯åŒ»è€…</div><div class="ref-reading">ã¯ã„ã—ã‚ƒ</div><div class="ref-meaning">dentist</div></div>
                        <div class="ref-item"><div class="ref-kanji">ç‹¬èº«</div><div class="ref-reading">ã©ãã—ã‚“</div><div class="ref-meaning">single</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä¼šç¤¾å“¡</div><div class="ref-reading">ã‹ã„ã—ã‚ƒã„ã‚“</div><div class="ref-meaning">employee</div></div>
                        <div class="ref-item"><div class="ref-kanji">å…¬å‹™å“¡</div><div class="ref-reading">ã“ã†ã‚€ã„ã‚“</div><div class="ref-meaning">civil servant</div></div>
                        <div class="ref-item"><div class="ref-kanji">é§…å“¡</div><div class="ref-reading">ãˆãã„ã‚“</div><div class="ref-meaning">station staff</div></div>
                        <div class="ref-item"><div class="ref-kanji">åº—å“¡</div><div class="ref-reading">ã¦ã‚“ã„ã‚“</div><div class="ref-meaning">shop staff</div></div>
                        <div class="ref-item"><div class="ref-kanji">æ•™å¸«</div><div class="ref-reading">ãã‚‡ã†ã—</div><div class="ref-meaning">teacher</div></div>
                        <div class="ref-item"><div class="ref-kanji">å¼è­·å£«</div><div class="ref-reading">ã¹ã‚“ã”ã—</div><div class="ref-meaning">lawyer</div></div>
                        <div class="ref-item"><div class="ref-kanji">åŒ»è€…</div><div class="ref-reading">ã„ã—ã‚ƒ</div><div class="ref-meaning">doctor</div></div>
                        <div class="ref-item"><div class="ref-kanji">çœ‹è­·å¸«</div><div class="ref-reading">ã‹ã‚“ã”ã—</div><div class="ref-meaning">nurse</div></div>
                        <div class="ref-item"><div class="ref-kanji">é‹è»¢æ‰‹</div><div class="ref-reading">ã†ã‚“ã¦ã‚“ã—ã‚…</div><div class="ref-meaning">driver</div></div>
                        <div class="ref-item"><div class="ref-kanji">è­¦å¯Ÿå®˜</div><div class="ref-reading">ã‘ã„ã•ã¤ã‹ã‚“</div><div class="ref-meaning">police</div></div>
                        <div class="ref-item"><div class="ref-kanji">ä½œå®¶</div><div class="ref-reading">ã•ã£ã‹</div><div class="ref-meaning">author</div></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive Kanji Data for Lessons 11-15
        const kanjiData = [
            // Lesson 11 - Counters & Family
            { kanji: 'ä¸€äºº', reading: 'ã²ã¨ã‚Š', meaning: 'one person', lesson: 11, emoji: 'ğŸ‘¤' },
            { kanji: 'äºŒäºº', reading: 'ãµãŸã‚Š', meaning: 'two people', lesson: 11, emoji: 'ğŸ‘¥' },
            { kanji: 'ä¸€å°', reading: 'ã„ã¡ã ã„', meaning: 'one machine', lesson: 11, emoji: 'ğŸš—' },
            { kanji: 'ä¸€æš', reading: 'ã„ã¡ã¾ã„', meaning: 'one flat item', lesson: 11, emoji: 'ğŸ“„' },
            { kanji: 'ä¸€å›', reading: 'ã„ã£ã‹ã„', meaning: 'one time', lesson: 11, emoji: '1ï¸âƒ£' },
            { kanji: 'åˆ‡æ‰‹', reading: 'ãã£ã¦', meaning: 'postage stamp', lesson: 11, emoji: 'ğŸ“®' },
            { kanji: 'å°ç­’', reading: 'ãµã†ã¨ã†', meaning: 'envelope', lesson: 11, emoji: 'âœ‰ï¸' },
            { kanji: 'ä¸¡è¦ª', reading: 'ã‚Šã‚‡ã†ã—ã‚“', meaning: 'parents', lesson: 11, emoji: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§' },
            { kanji: 'å…„å¼Ÿ', reading: 'ãã‚‡ã†ã ã„', meaning: 'siblings', lesson: 11, emoji: 'ğŸ‘«' },
            { kanji: 'å…„', reading: 'ã‚ã«', meaning: 'elder brother', lesson: 11, emoji: 'ğŸ‘¦' },
            { kanji: 'å§‰', reading: 'ã‚ã­', meaning: 'elder sister', lesson: 11, emoji: 'ğŸ‘§' },
            { kanji: 'å¼Ÿ', reading: 'ãŠã¨ã†ã¨', meaning: 'younger brother', lesson: 11, emoji: 'ğŸ‘¦' },
            { kanji: 'å¦¹', reading: 'ã„ã‚‚ã†ã¨', meaning: 'younger sister', lesson: 11, emoji: 'ğŸ‘§' },
            { kanji: 'å¤–å›½', reading: 'ãŒã„ã“ã', meaning: 'foreign country', lesson: 11, emoji: 'ğŸŒ' },
            { kanji: 'ç•™å­¦ç”Ÿ', reading: 'ã‚Šã‚…ã†ãŒãã›ã„', meaning: 'exchange student', lesson: 11, emoji: 'ğŸ“' },
            { kanji: 'ä¸€æ™‚é–“', reading: 'ã„ã¡ã˜ã‹ã‚“', meaning: 'one hour', lesson: 11, emoji: 'â°' },
            { kanji: 'ä¸€é€±é–“', reading: 'ã„ã£ã—ã‚…ã†ã‹ã‚“', meaning: 'one week', lesson: 11, emoji: 'ğŸ“…' },
            { kanji: 'ä¸€ã‹æœˆ', reading: 'ã„ã£ã‹ã’ã¤', meaning: 'one month', lesson: 11, emoji: 'ğŸ“†' },
            { kanji: 'ä¸€å¹´', reading: 'ã„ã¡ã­ã‚“', meaning: 'one year', lesson: 11, emoji: 'ğŸ—“ï¸' },
            { kanji: 'å…¨éƒ¨', reading: 'ãœã‚“ã¶', meaning: 'all, total', lesson: 11, emoji: 'ğŸ’¯' },
            
            // Lesson 12 - Seasons, Weather & Adjectives
            { kanji: 'ç°¡å˜', reading: 'ã‹ã‚“ãŸã‚“', meaning: 'easy, simple', lesson: 12, emoji: 'ğŸ˜Š' },
            { kanji: 'è¿‘ã„', reading: 'ã¡ã‹ã„', meaning: 'near', lesson: 12, emoji: 'ğŸ“' },
            { kanji: 'é ã„', reading: 'ã¨ãŠã„', meaning: 'far', lesson: 12, emoji: 'ğŸ›¤ï¸' },
            { kanji: 'æ—©ã„', reading: 'ã¯ã‚„ã„', meaning: 'early, fast', lesson: 12, emoji: 'â©' },
            { kanji: 'é…ã„', reading: 'ãŠãã„', meaning: 'slow, late', lesson: 12, emoji: 'ğŸ¢' },
            { kanji: 'å¤šã„', reading: 'ãŠãŠã„', meaning: 'many, much', lesson: 12, emoji: 'ğŸ“ˆ' },
            { kanji: 'å°‘ãªã„', reading: 'ã™ããªã„', meaning: 'few, little', lesson: 12, emoji: 'ğŸ“‰' },
            { kanji: 'æš–ã‹ã„', reading: 'ã‚ãŸãŸã‹ã„', meaning: 'warm', lesson: 12, emoji: 'â˜€ï¸' },
            { kanji: 'æ¶¼ã—ã„', reading: 'ã™ãšã—ã„', meaning: 'cool', lesson: 12, emoji: 'ğŸƒ' },
            { kanji: 'ç”˜ã„', reading: 'ã‚ã¾ã„', meaning: 'sweet', lesson: 12, emoji: 'ğŸ¬' },
            { kanji: 'è¾›ã„', reading: 'ã‹ã‚‰ã„', meaning: 'spicy', lesson: 12, emoji: 'ğŸŒ¶ï¸' },
            { kanji: 'é‡ã„', reading: 'ãŠã‚‚ã„', meaning: 'heavy', lesson: 12, emoji: 'ğŸ‹ï¸' },
            { kanji: 'è»½ã„', reading: 'ã‹ã‚‹ã„', meaning: 'light', lesson: 12, emoji: 'ğŸª¶' },
            { kanji: 'å­£ç¯€', reading: 'ãã›ã¤', meaning: 'season', lesson: 12, emoji: 'ğŸ‚' },
            { kanji: 'æ˜¥', reading: 'ã¯ã‚‹', meaning: 'spring', lesson: 12, emoji: 'ğŸŒ¸' },
            { kanji: 'å¤', reading: 'ãªã¤', meaning: 'summer', lesson: 12, emoji: 'ğŸŒ»' },
            { kanji: 'ç§‹', reading: 'ã‚ã', meaning: 'autumn', lesson: 12, emoji: 'ğŸ' },
            { kanji: 'å†¬', reading: 'ãµã‚†', meaning: 'winter', lesson: 12, emoji: 'â„ï¸' },
            { kanji: 'å¤©æ°—', reading: 'ã¦ã‚“ã', meaning: 'weather', lesson: 12, emoji: 'ğŸŒ¤ï¸' },
            { kanji: 'é›¨', reading: 'ã‚ã‚', meaning: 'rain', lesson: 12, emoji: 'ğŸŒ§ï¸' },
            { kanji: 'é›ª', reading: 'ã‚†ã', meaning: 'snow', lesson: 12, emoji: 'ğŸŒ¨ï¸' },
            { kanji: 'ç©ºæ¸¯', reading: 'ãã†ã“ã†', meaning: 'airport', lesson: 12, emoji: 'âœˆï¸' },
            { kanji: 'æµ·', reading: 'ã†ã¿', meaning: 'sea', lesson: 12, emoji: 'ğŸŒŠ' },
            { kanji: 'ä¸–ç•Œ', reading: 'ã›ã‹ã„', meaning: 'world', lesson: 12, emoji: 'ğŸŒ' },
            { kanji: 'ç¥­ã‚Š', reading: 'ã¾ã¤ã‚Š', meaning: 'festival', lesson: 12, emoji: 'ğŸ†' },
            
            // Lesson 13 - Places & Leisure
            { kanji: 'éŠã³ã¾ã™', reading: 'ã‚ãã³ã¾ã™', meaning: 'play', lesson: 13, emoji: 'ğŸ®' },
            { kanji: 'æ³³ãã¾ã™', reading: 'ãŠã‚ˆãã¾ã™', meaning: 'swim', lesson: 13, emoji: 'ğŸŠ' },
            { kanji: 'è¿ãˆã¾ã™', reading: 'ã‚€ã‹ãˆã¾ã™', meaning: 'welcome', lesson: 13, emoji: 'ğŸ¤' },
            { kanji: 'ç–²ã‚Œã¾ã™', reading: 'ã¤ã‹ã‚Œã¾ã™', meaning: 'get tired', lesson: 13, emoji: 'ğŸ˜´' },
            { kanji: 'çµå©šã—ã¾ã™', reading: 'ã‘ã£ã“ã‚“ã—ã¾ã™', meaning: 'marry', lesson: 13, emoji: 'ğŸ’’' },
            { kanji: 'è²·ã„ç‰©ã—ã¾ã™', reading: 'ã‹ã„ã‚‚ã®ã—ã¾ã™', meaning: 'shopping', lesson: 13, emoji: 'ğŸ›’' },
            { kanji: 'é£Ÿäº‹ã—ã¾ã™', reading: 'ã—ã‚‡ãã˜ã—ã¾ã™', meaning: 'have a meal', lesson: 13, emoji: 'ğŸ½ï¸' },
            { kanji: 'æ•£æ­©ã—ã¾ã™', reading: 'ã•ã‚“ã½ã—ã¾ã™', meaning: 'take a walk', lesson: 13, emoji: 'ğŸš¶' },
            { kanji: 'å¤§å¤‰', reading: 'ãŸã„ã¸ã‚“', meaning: 'hard, tough', lesson: 13, emoji: 'ğŸ˜°' },
            { kanji: 'æ¬²ã—ã„', reading: 'ã»ã—ã„', meaning: 'want', lesson: 13, emoji: 'ğŸ™' },
            { kanji: 'åºƒã„', reading: 'ã²ã‚ã„', meaning: 'wide, spacious', lesson: 13, emoji: 'ğŸŸï¸' },
            { kanji: 'ç‹­ã„', reading: 'ã›ã¾ã„', meaning: 'narrow', lesson: 13, emoji: 'ğŸ“' },
            { kanji: 'å·', reading: 'ã‹ã‚', meaning: 'river', lesson: 13, emoji: 'ğŸï¸' },
            { kanji: 'ç¾è¡“', reading: 'ã³ã˜ã‚…ã¤', meaning: 'fine arts', lesson: 13, emoji: 'ğŸ¨' },
            { kanji: 'é‡£ã‚Š', reading: 'ã¤ã‚Š', meaning: 'fishing', lesson: 13, emoji: 'ğŸ£' },
            { kanji: 'é€±æœ«', reading: 'ã—ã‚…ã†ã¾ã¤', meaning: 'weekend', lesson: 13, emoji: 'ğŸ“…' },
            { kanji: 'æ­£æœˆ', reading: 'ã—ã‚‡ã†ãŒã¤', meaning: 'New Year', lesson: 13, emoji: 'ğŸ' },
            { kanji: 'åšç‰©é¤¨', reading: 'ã¯ãã¶ã¤ã‹ã‚“', meaning: 'museum', lesson: 13, emoji: 'ğŸ›ï¸' },
            { kanji: 'å‹•ç‰©åœ’', reading: 'ã©ã†ã¶ã¤ãˆã‚“', meaning: 'zoo', lesson: 13, emoji: 'ğŸ¦' },
            { kanji: 'éŠåœ’åœ°', reading: 'ã‚†ã†ãˆã‚“ã¡', meaning: 'amusement park', lesson: 13, emoji: 'ğŸ¢' },
            { kanji: 'ç¥ç¤¾', reading: 'ã˜ã‚“ã˜ã‚ƒ', meaning: 'Shinto shrine', lesson: 13, emoji: 'â›©ï¸' },
            { kanji: 'æ•™ä¼š', reading: 'ãã‚‡ã†ã‹ã„', meaning: 'church', lesson: 13, emoji: 'â›ª' },
            { kanji: 'ä½“è‚²é¤¨', reading: 'ãŸã„ã„ãã‹ã‚“', meaning: 'gymnasium', lesson: 13, emoji: 'ğŸ€' },
            { kanji: 'å¤§ä½¿é¤¨', reading: 'ãŸã„ã—ã‹ã‚“', meaning: 'embassy', lesson: 13, emoji: 'ğŸ¢' },
            
            // Lesson 14 - Station & Verbs
            { kanji: 'æ¶ˆã—ã¾ã™', reading: 'ã‘ã—ã¾ã™', meaning: 'turn off', lesson: 14, emoji: 'ğŸ”Œ' },
            { kanji: 'é–‹ã‘ã¾ã™', reading: 'ã‚ã‘ã¾ã™', meaning: 'open', lesson: 14, emoji: 'ğŸšª' },
            { kanji: 'é–‰ã‚ã¾ã™', reading: 'ã—ã‚ã¾ã™', meaning: 'close', lesson: 14, emoji: 'ğŸ”’' },
            { kanji: 'æ€¥ãã¾ã™', reading: 'ã„ããã¾ã™', meaning: 'hurry', lesson: 14, emoji: 'ğŸƒ' },
            { kanji: 'å¾…ã¡ã¾ã™', reading: 'ã¾ã¡ã¾ã™', meaning: 'wait', lesson: 14, emoji: 'â³' },
            { kanji: 'æŒã¡ã¾ã™', reading: 'ã‚‚ã¡ã¾ã™', meaning: 'hold', lesson: 14, emoji: 'ğŸ¤²' },
            { kanji: 'å–ã‚Šã¾ã™', reading: 'ã¨ã‚Šã¾ã™', meaning: 'take', lesson: 14, emoji: 'âœ‹' },
            { kanji: 'æ‰‹ä¼ã„ã¾ã™', reading: 'ã¦ã¤ã ã„ã¾ã™', meaning: 'help', lesson: 14, emoji: 'ğŸ¤' },
            { kanji: 'å‘¼ã³ã¾ã™', reading: 'ã‚ˆã³ã¾ã™', meaning: 'call', lesson: 14, emoji: 'ğŸ“¢' },
            { kanji: 'è©±ã—ã¾ã™', reading: 'ã¯ãªã—ã¾ã™', meaning: 'speak', lesson: 14, emoji: 'ğŸ’¬' },
            { kanji: 'ä½¿ã„ã¾ã™', reading: 'ã¤ã‹ã„ã¾ã™', meaning: 'use', lesson: 14, emoji: 'ğŸ”§' },
            { kanji: 'æ­¢ã‚ã¾ã™', reading: 'ã¨ã‚ã¾ã™', meaning: 'stop', lesson: 14, emoji: 'ğŸ›‘' },
            { kanji: 'åº§ã‚Šã¾ã™', reading: 'ã™ã‚ã‚Šã¾ã™', meaning: 'sit', lesson: 14, emoji: 'ğŸª‘' },
            { kanji: 'ç«‹ã¡ã¾ã™', reading: 'ãŸã¡ã¾ã™', meaning: 'stand', lesson: 14, emoji: 'ğŸ§' },
            { kanji: 'å…¥ã‚Šã¾ã™', reading: 'ã¯ã„ã‚Šã¾ã™', meaning: 'enter', lesson: 14, emoji: 'â¡ï¸' },
            { kanji: 'å‡ºã¾ã™', reading: 'ã§ã¾ã™', meaning: 'exit', lesson: 14, emoji: 'â¬…ï¸' },
            { kanji: 'é›»æ°—', reading: 'ã§ã‚“ã', meaning: 'electricity', lesson: 14, emoji: 'ğŸ’¡' },
            { kanji: 'åå‰', reading: 'ãªã¾ãˆ', meaning: 'name', lesson: 14, emoji: 'ğŸ“›' },
            { kanji: 'ä½æ‰€', reading: 'ã˜ã‚…ã†ã—ã‚‡', meaning: 'address', lesson: 14, emoji: 'ğŸ ' },
            { kanji: 'åœ°å›³', reading: 'ã¡ãš', meaning: 'map', lesson: 14, emoji: 'ğŸ—ºï¸' },
            { kanji: 'å‡ºå£', reading: 'ã§ãã¡', meaning: 'exit', lesson: 14, emoji: 'ğŸšª' },
            { kanji: 'å…¥å£', reading: 'ã„ã‚Šãã¡', meaning: 'entrance', lesson: 14, emoji: 'ğŸšª' },
            { kanji: 'æ”¹æœ­å£', reading: 'ã‹ã„ã•ã¤ãã¡', meaning: 'ticket gate', lesson: 14, emoji: 'ğŸš‰' },
            { kanji: 'ç‰¹æ€¥', reading: 'ã¨ã£ãã‚…ã†', meaning: 'express train', lesson: 14, emoji: 'ğŸš…' },
            { kanji: 'æ™®é€š', reading: 'ãµã¤ã†', meaning: 'local train', lesson: 14, emoji: 'ğŸšƒ' },
            
            // Lesson 15 - Occupations & Verbs
            { kanji: 'ç½®ãã¾ã™', reading: 'ãŠãã¾ã™', meaning: 'put, place', lesson: 15, emoji: 'ğŸ“¦' },
            { kanji: 'ä½œã‚Šã¾ã™', reading: 'ã¤ãã‚Šã¾ã™', meaning: 'make', lesson: 15, emoji: 'ğŸ”¨' },
            { kanji: 'å£²ã‚Šã¾ã™', reading: 'ã†ã‚Šã¾ã™', meaning: 'sell', lesson: 15, emoji: 'ğŸ’°' },
            { kanji: 'çŸ¥ã‚Šã¾ã™', reading: 'ã—ã‚Šã¾ã™', meaning: 'know', lesson: 15, emoji: 'ğŸ§ ' },
            { kanji: 'ä½ã¿ã¾ã™', reading: 'ã™ã¿ã¾ã™', meaning: 'live', lesson: 15, emoji: 'ğŸ ' },
            { kanji: 'ç ”ç©¶ã—ã¾ã™', reading: 'ã‘ã‚“ãã‚…ã†ã—ã¾ã™', meaning: 'research', lesson: 15, emoji: 'ğŸ”¬' },
            { kanji: 'è³‡æ–™', reading: 'ã—ã‚Šã‚‡ã†', meaning: 'materials, data', lesson: 15, emoji: 'ğŸ“Š' },
            { kanji: 'æœ', reading: 'ãµã', meaning: 'clothes', lesson: 15, emoji: 'ğŸ‘”' },
            { kanji: 'è£½å“', reading: 'ã›ã„ã²ã‚“', meaning: 'products', lesson: 15, emoji: 'ğŸ“¦' },
            { kanji: 'çµŒæ¸ˆ', reading: 'ã‘ã„ã–ã„', meaning: 'economy', lesson: 15, emoji: 'ğŸ’¹' },
            { kanji: 'å¸‚å½¹æ‰€', reading: 'ã—ã‚„ãã—ã‚‡', meaning: 'city hall', lesson: 15, emoji: 'ğŸ›ï¸' },
            { kanji: 'é«˜æ ¡', reading: 'ã“ã†ã“ã†', meaning: 'high school', lesson: 15, emoji: 'ğŸ«' },
            { kanji: 'æ­¯åŒ»è€…', reading: 'ã¯ã„ã—ã‚ƒ', meaning: 'dentist', lesson: 15, emoji: 'ğŸ¦·' },
            { kanji: 'ç‹¬èº«', reading: 'ã©ãã—ã‚“', meaning: 'single, unmarried', lesson: 15, emoji: 'ğŸ’' },
            { kanji: 'ä¼šç¤¾å“¡', reading: 'ã‹ã„ã—ã‚ƒã„ã‚“', meaning: 'company employee', lesson: 15, emoji: 'ğŸ‘”' },
            { kanji: 'å…¬å‹™å“¡', reading: 'ã“ã†ã‚€ã„ã‚“', meaning: 'civil servant', lesson: 15, emoji: 'ğŸ¢' },
            { kanji: 'é§…å“¡', reading: 'ãˆãã„ã‚“', meaning: 'station staff', lesson: 15, emoji: 'ğŸš‰' },
            { kanji: 'åº—å“¡', reading: 'ã¦ã‚“ã„ã‚“', meaning: 'shop staff', lesson: 15, emoji: 'ğŸª' },
            { kanji: 'æ•™å¸«', reading: 'ãã‚‡ã†ã—', meaning: 'teacher', lesson: 15, emoji: 'ğŸ‘¨â€ğŸ«' },
            { kanji: 'å¼è­·å£«', reading: 'ã¹ã‚“ã”ã—', meaning: 'lawyer', lesson: 15, emoji: 'âš–ï¸' },
            { kanji: 'åŒ»è€…', reading: 'ã„ã—ã‚ƒ', meaning: 'doctor', lesson: 15, emoji: 'ğŸ‘¨â€âš•ï¸' },
            { kanji: 'çœ‹è­·å¸«', reading: 'ã‹ã‚“ã”ã—', meaning: 'nurse', lesson: 15, emoji: 'ğŸ‘©â€âš•ï¸' },
            { kanji: 'é‹è»¢æ‰‹', reading: 'ã†ã‚“ã¦ã‚“ã—ã‚…', meaning: 'driver', lesson: 15, emoji: 'ğŸš—' },
            { kanji: 'è­¦å¯Ÿå®˜', reading: 'ã‘ã„ã•ã¤ã‹ã‚“', meaning: 'police officer', lesson: 15, emoji: 'ğŸ‘®' },
            { kanji: 'ä½œå®¶', reading: 'ã•ã£ã‹', meaning: 'author', lesson: 15, emoji: 'âœï¸' }
        ];
        
        // Question types
        const questionTypes = [
            { type: 'meaning', label: 'ã„ã¿ â†’ ã‹ã‚“ã˜', icon: 'ğŸ“–', badge: 'ã„ã¿', instruction: 'ã¤ãã® ã„ã¿ã® ã‹ã‚“ã˜ã‚’ ãˆã‚‰ã‚“ã§ãã ã•ã„' },
            { type: 'reading', label: 'ã‚ˆã¿ã‹ãŸ â†’ ã‹ã‚“ã˜', icon: 'ğŸ“', badge: 'ã‚ˆã¿', instruction: 'ã¤ãã® ã‚ˆã¿ã‹ãŸã® ã‹ã‚“ã˜ã‚’ ãˆã‚‰ã‚“ã§ãã ã•ã„' },
            { type: 'kanji', label: 'ã‹ã‚“ã˜ â†’ ã„ã¿', icon: 'ğŸ”¤', badge: 'ã‹ã‚“ã˜', instruction: 'ã¤ãã® ã‹ã‚“ã˜ã® ã„ã¿ã‚’ ãˆã‚‰ã‚“ã§ãã ã•ã„' }
        ];
        
        // Quiz state
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let userAnswers = [];
        const TOTAL_QUESTIONS = 40;
        const PASS_PERCENT = 80;
        
        // Shuffle function
        function shuffle(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        // Generate questions ensuring coverage from all lessons
        function generateQuestions() {
            currentQuestions = [];
            
            // Get kanji from each lesson
            const lessonGroups = {};
            for (let i = 11; i <= 15; i++) {
                lessonGroups[i] = kanjiData.filter(k => k.lesson === i);
            }
            
            // Distribute questions: 8 per lesson
            const questionsPerLesson = 8;
            let selectedKanji = [];
            
            for (let lesson = 11; lesson <= 15; lesson++) {
                const shuffledLesson = shuffle(lessonGroups[lesson]);
                selectedKanji = selectedKanji.concat(shuffledLesson.slice(0, questionsPerLesson));
            }
            
            // Shuffle all selected kanji
            selectedKanji = shuffle(selectedKanji);
            
            // Create questions
            for (let i = 0; i < TOTAL_QUESTIONS; i++) {
                const kanji = selectedKanji[i];
                const questionType = questionTypes[Math.floor(Math.random() * questionTypes.length)];
                
                // Generate wrong answers from same lesson for more challenge
                let wrongAnswers = [];
                const sameLesson = kanjiData.filter(k => k.lesson === kanji.lesson && k.kanji !== kanji.kanji);
                const otherKanji = kanjiData.filter(k => k.kanji !== kanji.kanji);
                
                // Mix: 2 from same lesson, 1 from different
                const shuffledSame = shuffle(sameLesson);
                const shuffledOther = shuffle(otherKanji.filter(k => k.lesson !== kanji.lesson));
                
                if (questionType.type === 'meaning' || questionType.type === 'reading') {
                    wrongAnswers = [
                        ...shuffledSame.slice(0, 2).map(k => k.kanji),
                        ...shuffledOther.slice(0, 1).map(k => k.kanji)
                    ];
                } else {
                    wrongAnswers = [
                        ...shuffledSame.slice(0, 2).map(k => k.meaning),
                        ...shuffledOther.slice(0, 1).map(k => k.meaning)
                    ];
                }
                
                currentQuestions.push({
                    ...kanji,
                    questionType: questionType,
                    correctAnswer: questionType.type === 'kanji' ? kanji.meaning : kanji.kanji,
                    options: shuffle([
                        questionType.type === 'kanji' ? kanji.meaning : kanji.kanji,
                        ...wrongAnswers.slice(0, 3)
                    ])
                });
            }
        }
        
        // Start quiz
        function startQuiz() {
            generateQuestions();
            currentQuestionIndex = 0;
            correctAnswers = 0;
            userAnswers = new Array(TOTAL_QUESTIONS).fill(null);
            
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('questionScreen').classList.remove('hidden');
            document.getElementById('resultsScreen').classList.add('hidden');
            
            displayQuestion();
        }
        
        // Display question
        function displayQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            const qType = question.questionType;
            
            // Update header
            document.getElementById('questionTypeIcon').textContent = qType.icon;
            document.getElementById('questionTypeLabel').textContent = qType.label;
            document.getElementById('questionNumber').textContent = `ã‚‚ã‚“ã ã„ ${currentQuestionIndex + 1}`;
            document.getElementById('lessonIndicator').textContent = `L${question.lesson}`;
            document.getElementById('questionInstruction').textContent = qType.instruction;
            
            // Update badge
            const badge = document.getElementById('questionTypeBadge');
            badge.textContent = qType.badge;
            badge.className = 'question-type ' + qType.type;
            
            // Show appropriate prompt
            const kanjiPrompt = document.getElementById('kanjiPrompt');
            const meaningPrompt = document.getElementById('meaningPrompt');
            const readingPrompt = document.getElementById('readingPrompt');
            
            kanjiPrompt.classList.add('hidden');
            meaningPrompt.classList.add('hidden');
            readingPrompt.classList.add('hidden');
            
            if (qType.type === 'meaning') {
                meaningPrompt.textContent = `${question.emoji} ${question.meaning}`;
                meaningPrompt.classList.remove('hidden');
            } else if (qType.type === 'reading') {
                readingPrompt.textContent = question.reading;
                readingPrompt.classList.remove('hidden');
            } else {
                kanjiPrompt.textContent = question.kanji;
                kanjiPrompt.classList.remove('hidden');
            }
            
            // Generate options
            const optionsGrid = document.getElementById('optionsGrid');
            optionsGrid.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = option;
                btn.onclick = () => selectAnswer(index, option);
                
                // Check if this was previously answered
                if (userAnswers[currentQuestionIndex] !== null) {
                    if (option === question.correctAnswer) {
                        btn.classList.add('correct');
                    } else if (option === userAnswers[currentQuestionIndex] && option !== question.correctAnswer) {
                        btn.classList.add('incorrect');
                    }
                    btn.style.pointerEvents = 'none';
                }
                
                optionsGrid.appendChild(btn);
            });
            
            // Update progress
            document.getElementById('currentQ').textContent = currentQuestionIndex + 1;
            document.getElementById('progressFill').style.width = `${((currentQuestionIndex + 1) / TOTAL_QUESTIONS) * 100}%`;
            
            // Update navigation
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextBtn').disabled = userAnswers[currentQuestionIndex] === null;
            document.getElementById('nextBtn').textContent = currentQuestionIndex === TOTAL_QUESTIONS - 1 ? 'ã‘ã£ã‹' : 'ã¤ã';
            
            // Update feedback
            const feedback = document.getElementById('feedback');
            if (userAnswers[currentQuestionIndex] !== null) {
                showFeedback(userAnswers[currentQuestionIndex] === question.correctAnswer, question);
            } else {
                feedback.classList.remove('show');
            }
        }
        
        // Select answer
        function selectAnswer(index, answer) {
            const question = currentQuestions[currentQuestionIndex];
            const isCorrect = answer === question.correctAnswer;
            
            // Store answer
            if (userAnswers[currentQuestionIndex] === null) {
                userAnswers[currentQuestionIndex] = answer;
                if (isCorrect) {
                    correctAnswers++;
                    document.getElementById('correctCount').textContent = correctAnswers;
                }
            }
            
            // Update button styles
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach((btn, i) => {
                const optionText = btn.textContent;
                if (optionText === question.correctAnswer) {
                    btn.classList.add('correct');
                } else if (i === index && !isCorrect) {
                    btn.classList.add('incorrect');
                }
                btn.style.pointerEvents = 'none';
            });
            
            // Show feedback
            showFeedback(isCorrect, question);
            
            // Enable next button
            document.getElementById('nextBtn').disabled = false;
        }
        
        // Show feedback
        function showFeedback(isCorrect, question) {
            const feedback = document.getElementById('feedback');
            const feedbackText = document.getElementById('feedbackText');
            
            feedback.classList.remove('correct', 'incorrect');
            feedback.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            if (isCorrect) {
                feedbackText.innerHTML = `âœ¨ ã›ã„ã‹ã„ï¼ <strong>${question.kanji}</strong>ï¼ˆ${question.reading}ï¼‰= ${question.meaning} [L${question.lesson}]`;
            } else {
                feedbackText.innerHTML = `âŒ ã–ã‚“ã­ã‚“ï¼ ã›ã„ã‹ã„ã¯ <strong>${question.kanji}</strong>ï¼ˆ${question.reading}ï¼‰= ${question.meaning} [L${question.lesson}]`;
            }
            
            feedback.classList.add('show');
        }
        
        // Navigation
        function nextQuestion() {
            if (currentQuestionIndex < TOTAL_QUESTIONS - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                showResults();
            }
        }
        
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }
        
        // Show results
        function showResults() {
            document.getElementById('questionScreen').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            
            const percent = Math.round((correctAnswers / TOTAL_QUESTIONS) * 100);
            const passed = percent >= PASS_PERCENT;
            
            const resultIcon = document.getElementById('resultIcon');
            const resultTitle = document.getElementById('resultTitle');
            const resultScore = document.getElementById('resultScore');
            const resultMessage = document.getElementById('resultMessage');
            
            resultIcon.textContent = passed ? 'ğŸ‰' : 'ğŸ“š';
            resultTitle.textContent = passed ? 'ã”ã†ã‹ãï¼' : 'ã‚‚ã† ã„ã¡ã©ï¼';
            resultTitle.className = 'result-title ' + (passed ? 'pass' : 'fail');
            resultScore.textContent = `${percent}%`;
            resultScore.className = 'result-score ' + (passed ? 'pass' : 'fail');
            
            if (passed) {
                resultMessage.innerHTML = 'ã™ã°ã‚‰ã—ã„ï¼ ã ã„11-15ã‹ã® ã‹ã‚“ã˜ã‚’ ã‚ˆã ãŠã¼ãˆã¦ã„ã¾ã™ã­ï¼<br><em>Excellent! You know the kanji from Lessons 11-15 well!</em>';
            } else {
                resultMessage.innerHTML = `ãŒã‚“ã°ã£ã¦ï¼ 80%ãŒ ã”ã†ã‹ãã§ã™ã€‚<br><em>Keep trying! You need 80% to pass.</em>`;
            }
            
            document.getElementById('finalCorrect').textContent = correctAnswers;
            document.getElementById('finalIncorrect').textContent = TOTAL_QUESTIONS - correctAnswers;
            document.getElementById('finalPercent').textContent = `${percent}%`;
        }
        
        // Retry quiz
        function retryQuiz() {
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
            document.getElementById('correctCount').textContent = '0';
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('currentQ').textContent = '0';
        }
        
        // Toggle reference
        function toggleReference() {
            const refCard = document.getElementById('referenceCard');
            refCard.classList.toggle('show');
            const btn = document.querySelector('.reference-btn');
            btn.textContent = refCard.classList.contains('show') ? 'ğŸ“– ã‹ã‚“ã˜ãƒªã‚¹ãƒˆã‚’ ã‹ãã™' : 'ğŸ“– ã‹ã‚“ã˜ãƒªã‚¹ãƒˆã‚’ ã¿ã‚‹';
        }
        
        // Show lesson content
        function showLesson(lessonNum) {
            // Update tabs
            document.querySelectorAll('.lesson-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Hide all lesson contents
            document.querySelectorAll('.lesson-content').forEach(content => content.classList.add('hidden'));
            
            if (lessonNum === 0) {
                // Show all
                document.querySelectorAll('.lesson-content').forEach(content => content.classList.remove('hidden'));
            } else {
                document.getElementById(`lesson${lessonNum}Content`).classList.remove('hidden');
            }
        }
        
        // Touch/swipe support for mobile
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0 && !document.getElementById('nextBtn').disabled) {
                    nextQuestion();
                } else if (diff < 0 && !document.getElementById('prevBtn').disabled) {
                    prevQuestion();
                }
            }
        }
        
        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('questionScreen').classList.contains('hidden')) return;
            
            if (e.key === 'ArrowRight' && !document.getElementById('nextBtn').disabled) {
                nextQuestion();
            } else if (e.key === 'ArrowLeft' && !document.getElementById('prevBtn').disabled) {
                prevQuestion();
            } else if (e.key >= '1' && e.key <= '4') {
                const index = parseInt(e.key) - 1;
                const buttons = document.querySelectorAll('.option-btn');
                if (buttons[index] && !buttons[index].classList.contains('correct') && !buttons[index].classList.contains('incorrect')) {
                    buttons[index].click();
                }
            }
        });
    </script>
</body>
</html>
